Getting files for app H2LnOaVy-ncwpzaor in org H2LnOaVy / space DTC_challenge as CRAFTuser@H2LnOaVy...
OK

[{"type":"tab","id":"ee7ea2cd.8cde3","label":"Sheet 1"},{"type":"tab","id":"73d9648e.a2dc1c","label":"Other Sample"},{"type":"tab","id":"278dcf49.90646","label":"K5 Iot Sample1"},{"type":"tab","id":"55959749.824718","label":"Postgres API"},{"type":"tab","id":"4facf94.2422908","label":"Sensor Manage Sample"},{"id":"5fbac071.4b08d","type":"websocket-listener","path":"/ws/sensor1","wholemsg":"false"},{"id":"11917135.5de19f","type":"mqtt-broker","broker":"api.trial2.iot.jp.fujitsu.com","port":"1883","clientid":""},{"id":"a7949bb6.944e38","type":"websocket-listener","path":"/ws/sensor2","wholemsg":"false"},{"id":"8fdc7071.ca817","type":"websocket-listener","path":"/ws/sensor","wholemsg":"false"},{"id":"437ce790.863708","type":"websocket-listener","path":"/ws/sensor3","wholemsg":"false"},{"id":"f45a52fa.a21f","type":"websocket-listener","path":"/ws/sensor4","wholemsg":"false"},{"id":"435211f1.bcadf","type":"websocket-listener","path":"/ws/rtchart","wholemsg":"false"},{"id":"a7aa3c6e.2da45","type":"ui_tab","name":"Temperature Status","icon":"dashboard","order":"1"},{"id":"85520cfd.6c5a3","type":"ui_tab","name":"Temperature Chart Graph 1 Hour","icon":"dashboard","order":"1"},{"id":"aecdcf58.fb5c9","type":"ui_tab","name":"Humidity Status","icon":"dashboard","order":"1"},{"id":"9614aa63.ea9888","type":"ui_tab","name":"Humidity Chart Graph 1 Hour","icon":"dashboard","order":"1"},{"id":"a26c4963.778498","type":"ui_tab","name":"Humidity Chart Graph 12 Hours","icon":"dashboard","order":"1"},{"id":"b2251b3a.e88bc8","type":"ui_tab","name":"Humidity Chart Graph 1 Week","icon":"dashboard","order":"1"},{"id":"a09df126.e15a5","type":"ui_tab","name":"Temperature Chart Graph 12 Hours","icon":"dashboard","order":"1"},{"id":"3d5dc16c.f5300e","type":"ui_tab","name":"Temperature Chart Graph 1 Week","icon":"dashboard","order":"1"},{"id":"1cdc5509.3fb37b","type":"sqldbsdatabase","host":"ArFMyqjbImh-uJQyrqLgDc4CMHlxlGR-pT5l-284NIxXNiiOx-4290000.database-jp-east-1.internal.cloud.global.fujitsu.com","port":"26500","db":"clqa9mwl","dialect":"postgres"},{"id":"54192100.1d709","type":"websocket-listener","path":"/ws/sensor5","wholemsg":"false"},{"id":"5945612.f2a34a","type":"websocket-listener","path":"/ws/sensor6","wholemsg":"false"},{"id":"13fa2ec7.0e6081","type":"websocket-listener","path":"/ws/sensor7","wholemsg":"false"},{"id":"7bf18ae5.ceac64","type":"websocket-listener","path":"/ws/sensor8","wholemsg":"false"},{"id":"b88098e5.2edd18","type":"postgresdb","hostname":"ArFMyqjbImh-uJQyrqLgDc4CMHlxlGR-pT5l-284NIxXNiiOx-4290000.database-jp-east-1.internal.cloud.global.fujitsu.com","port":"26500","db":"clqa9mwl","ssl":false},{"id":"168f2030.e970e","type":"postgresdb","hostname":"localhost","port":"5432","db":"postgres"},{"id":"735aba0d.4d1c04","type":"mqtt-broker","broker":"test.mosquitto.org","port":"1883","clientid":""},{"id":"17f6f531.3e3ffb","type":"inject","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":117,"y":85,"z":"ee7ea2cd.8cde3","wires":[["fdd1e7d8.9fa608"]]},{"id":"fdd1e7d8.9fa608","type":"debug","name":"","active":true,"console":"false","complete":"false","x":525,"y":81,"z":"ee7ea2cd.8cde3","wires":[]},{"id":"4d2cd13d.abdf5","type":"http in","name":"","url":"/Tabulator","method":"get","x":208,"y":122,"z":"73d9648e.a2dc1c","wires":[["2349f29a.6a690e"]]},{"id":"2349f29a.6a690e","type":"template","name":"Script","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link href=\"https://cdnjs.cloudflare.com/ajax/libs/tabulator/2.11.0/tabulator.min.css\" rel=\"stylesheet\">\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://d3js.org/d3.v4.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/tabulator/2.11.0/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.23.0/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment-with-locales.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.13/moment-timezone-with-data.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n\n<!--\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/d3.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery-ui.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery.radios-to-slider.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/tabulator.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery.fancytree-all.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/tauCharts.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/underscore-min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/moment-with-locales.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/moment-timezone-with-data.js\"></script>\n\t<link href=\"http://localhost:81/stylesheets/themes/semantic-ui/tabulator_semantic-ui.css\" rel=\"stylesheet\">\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/tauCharts/1.2.1/tauCharts.min.js\"></script>\n\t<link href=\"https://cdnjs.cloudflare.com/ajax/libs/tauCharts/1.2.1/tauCharts.min.css\" rel=\"stylesheet\">\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/date-time-week.js\"></script>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost:81/stylesheets/style.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost:81/stylesheets/style_20170523.css\">\n-->\n\n</head>\n\n<p><span style = 'color:blue; font-size:140%; font-weight:bold;'>-----< Tabulator を使用して表を作成 >-----</span></p>\n<br>\n\n<p><span style = 'color:red; font-size:120%; font-weight:bold;'>環境センサー稼働状況一覧</span></p>\n<input type=\"button\" value=\"更新\" onclick=\"location.reload();\" /> \n\n<br>\n<div id=\"example-table\"></div>\n<br/>\n\n<p><span style = 'color:red; font-size:120%; font-weight:bold;'>ラック扉開閉状況一覧</span></p>\n<input type=\"button\" value=\"更新\" onclick=\"location.reload();\" /> \n\n<br>\n<div id=\"door-table\"></div>\n<br/>\n\n<script>\n\nkoshin();\ndatetimeweek();\n\n//trigger download of data.csv file\n$(\"#download-csv\").click(function(){\n\t$(\"#example-table\").tabulator(\"download\", \"csv\", \"data.csv\");\n});\n\n//trigger download of data.json file\n$(\"#download-json\").click(function(){\n\t$(\"#example-table\").tabulator(\"download\", \"json\", \"data.json\");\n});\n\n$(\"#example-table\").tabulator({\n\theight:\"640px\",\n\tdateFormat:\"yyyy/mm/dd\",\n\tfitColumns:true,\n//\tpagination:true,\n//\ttooltips:true,\n\tmovableRows:true,\n\tcolumns:[\n\t\t{title:\"Sensor Name\", field:\"name\", sortable:true, width:200, align:\"center\"},\n\t\t{title:\"Status\", field:\"doacheck\", sorter:\"boolean\", sortable:true, align:\"center\", formatter:\"tickCross\", width:100},\n\t\t{title:\"Place\", field:\"place\", sortable:true, sorter:\"number\", width:200, align:\"center\"},\n\t\t{title:\"Date\", field:\"date\", sortable:true, sorter:\"date\", width:150, align:\"center\"},\n\t\t{title:\"Time\", field:\"time\", sortable:false, width:150, align:\"center\"},\n\t\t{title:\"Ambient Temperature\", field:\"temp\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Object Temperature\", field:\"objectTemp\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Humidity\", field:\"humidity\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Barometer\", field:\"barometer\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"lux\", field:\"lux\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Note\", field:\"note\", sortable:false, width:300, align:\"left\", editable:true},\n\t],\n});\n\n$(\"#example-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/data/data15.json\");\n\n\n$(\"#door-table\").tabulator({\n\theight:\"320px\",\n\tdateFormat:\"yyyy/mm/dd\",\n\tfitColumns:true,\n//\tpagination:true,\n//\ttooltips:true,\n\tmovableRows:true,\n\tcolumns:[\n\t\t{title:\"Rack Name\", field:\"place\", sortable:true, sorter:\"number\", width:200, align:\"center\"},\n\t\t{title:\"Door Status\", field:\"door_open\", sorter:\"boolean\", sortable:true, align:\"center\", formatter:\"tickCross\", width:150},\n\t\t{title:\"Date\", field:\"date\", sortable:true, sorter:\"date\", width:150, align:\"center\"},\n\t\t{title:\"Time\", field:\"time\", sortable:false, width:150, align:\"center\"},\n\t\t{title:\"Note\", field:\"note\", sortable:false, width:300, align:\"left\", editable:true},\n\t],\n});\n\n$(\"#door-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/data/data16.json\");\n\n\n\n\n</script>\n\n</body>\n</html>","x":400,"y":122,"z":"73d9648e.a2dc1c","wires":[["bd015017.1cc6"]]},{"id":"bd015017.1cc6","type":"http response","name":"","x":631,"y":122,"z":"73d9648e.a2dc1c","wires":[]},{"id":"76970441.54685c","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":105,"y":142,"z":"278dcf49.90646","wires":[["3e7b3b11.60af54","e064475.0dfbdb8","36713af9.6c6216","cb8202d1.2c911","dd617e2e.77943","48065213.b35a7c","359b4f11.b9378","4c492a4a.c9fbb4"]]},{"id":"3e7b3b11.60af54","type":"function","name":"Create dummy rundom data for Sensor1","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor1\";\n\n// Object of place\nvar location1 = \"ServerRack1\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":384,"y":143,"z":"278dcf49.90646","wires":[["3159fff9.59a28"]]},{"id":"e064475.0dfbdb8","type":"function","name":"Create dummy rundom data for Sensor2","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor2\";\n\n// Object of place\nvar location1 = \"ServerRack2\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":384,"y":179,"z":"278dcf49.90646","wires":[["b271d1d1.fc546"]]},{"id":"36713af9.6c6216","type":"function","name":"Create dummy rundom data for Sensor3","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor3\";\n\n// Object of place\nvar location1 = \"ServerRack3\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":384.75,"y":215,"z":"278dcf49.90646","wires":[["b46ba28e.7d199"]]},{"id":"cb8202d1.2c911","type":"function","name":"Create dummy rundom data for Sensor4","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor4\";\n\n// Object of place\nvar location1 = \"ServerRack4\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":385.75,"y":251,"z":"278dcf49.90646","wires":[["5b441377.10be9c"]]},{"id":"ba4f2864.4e91e8","type":"template","name":"Authrization Header","field":"headers.Authorization","template":"Bearer testcode2","x":763.75,"y":407,"z":"278dcf49.90646","wires":[["8cf531ba.30441"]]},{"id":"8cf531ba.30441","type":"http request","name":"REST API Put data","method":"PUT","ret":"txt","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2","x":979.75,"y":407,"z":"278dcf49.90646","wires":[["8bca6d83.4463c"]]},{"id":"8bca6d83.4463c","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1179.75,"y":406,"z":"278dcf49.90646","wires":[]},{"id":"6282fef8.54d33","type":"comment","name":"Send data to MQTT Out(Publish)","info":"","x":800,"y":105,"z":"278dcf49.90646","wires":[]},{"id":"d9c1ce.3a855e3","type":"comment","name":"Send data to REST API Put","info":"","x":782.75,"y":371,"z":"278dcf49.90646","wires":[]},{"id":"86850627.552aa8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":513.75,"y":479,"z":"278dcf49.90646","wires":[]},{"id":"6faf761b.7c99a8","type":"json","name":"","x":295.75,"y":558,"z":"278dcf49.90646","wires":[["86850627.552aa8","7e58db59.9c5014","1c343cb0.451d73","5a895938.bccef8"]]},{"id":"de07b455.674c98","type":"comment","name":"Subscribe from MQTT In","info":"","x":138.75,"y":449,"z":"278dcf49.90646","wires":[]},{"id":"1c343cb0.451d73","type":"csv","name":"JSON to CSV output","sep":",","hdrin":"","hdrout":false,"multi":"one","ret":"\\n","temp":"date,time,sensorname,temperature,humidity","x":535.75,"y":520,"z":"278dcf49.90646","wires":[["a317b8d7.7598d8","cca23679.19b948"]]},{"id":"a317b8d7.7598d8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":752.75,"y":541,"z":"278dcf49.90646","wires":[]},{"id":"cca23679.19b948","type":"file","name":"Write to CSV File","filename":"public/data/test_20170707.csv","appendNewline":false,"overwriteFile":"false","x":766.75,"y":500,"z":"278dcf49.90646","wires":[]},{"id":"7e58db59.9c5014","type":"switch","name":"Separate by SensorName","property":"payload.sensorname","rules":[{"t":"eq","v":"Sensor1"},{"t":"eq","v":"Sensor2"},{"t":"eq","v":"Sensor3"},{"t":"eq","v":"Sensor4"},{"t":"eq","v":"Sensor5"},{"t":"eq","v":"Sensor6"},{"t":"eq","v":"Sensor7"},{"t":"eq","v":"Sensor8"}],"checkall":"true","outputs":8,"x":174.75,"y":779.9999942779541,"z":"278dcf49.90646","wires":[["abb65bdb.b58158","3b3a6712.0daeb8","644a4920.79cca8"],["a4c22d30.837bb","4d586f60.158b9","d5dff450.6d6df8"],["a7454d61.95232","cc117a6f.eec148","f90bdb15.d36b38"],["b5ce413.1bdb4c","fa2ac2fe.256c5","5da4a37f.282c9c"],["11ff1eb.339c9e1","a1c1bf52.77edd","bdd65f4d.a41fb"],["b6e122f5.0ce6e","1ec1795c.cd7d37","22d91f97.59f66"],["6fa60e72.dbbf8","42fd3e7e.95556","4ad899c7.f29a38"],["3f106af7.5e9b76","65dd1676.b4dd08","40dc09b1.60b488"]]},{"id":"3b3a6712.0daeb8","type":"function","name":"Sensor1 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":651.4444580078125,"y":705.1666202545166,"z":"278dcf49.90646","wires":[["cd116fa9.0aefb","5dc46343.fbbf0c","149a3845.c73678","72bc50c8.5e0af","99bec8ff.a23098"]]},{"id":"cd116fa9.0aefb","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1249.333408355713,"y":518.9444541931152,"z":"278dcf49.90646","wires":[]},{"id":"4d586f60.158b9","type":"function","name":"Sensor2 Temp Payload","func":"return {payload:msg.payload.temperature};\n","outputs":1,"x":649.9167060852051,"y":744.9167232513428,"z":"278dcf49.90646","wires":[["bc014722.50b6a8","5a35bc25.b30ae4","b8483e6d.64d42","14ae7fcc.43fd5","3fdc5d0d.4810d2"]]},{"id":"cc117a6f.eec148","type":"function","name":"Sensor3 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":651.6111450195312,"y":785.3333683013916,"z":"278dcf49.90646","wires":[["9415ff5e.ad985","43d523d0.329afc","1aec9bcf.256de4","6a9c7b0c.371454","6bece27b.ca507c"]]},{"id":"fa2ac2fe.256c5","type":"function","name":"Sensor4 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":651.3055419921875,"y":826.8055973052979,"z":"278dcf49.90646","wires":[["deecd32.8a2ca3","8956b85.1f84148","b612ff0.25794","b97f7943.c1b948","9848d2c.0e4113"]]},{"id":"bc014722.50b6a8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1249.694492340088,"y":560.8055934906006,"z":"278dcf49.90646","wires":[]},{"id":"9415ff5e.ad985","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1251.5278549194336,"y":603.4444580078125,"z":"278dcf49.90646","wires":[]},{"id":"deecd32.8a2ca3","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1251.9167022705078,"y":645.0556106567383,"z":"278dcf49.90646","wires":[]},{"id":"d91f0d0.54ec6f","type":"comment","name":"Make dummy data to Publish","info":"","x":345,"y":105,"z":"278dcf49.90646","wires":[]},{"id":"8d769f21.4908c","type":"websocket out","name":"/ws/sensor1","server":"5fbac071.4b08d","client":"","x":295.75,"y":1018.6667423248291,"z":"278dcf49.90646","wires":[]},{"id":"abb65bdb.b58158","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":128.1944580078125,"y":1017.6666355133057,"z":"278dcf49.90646","wires":[["8d769f21.4908c"]]},{"id":"a4c22d30.837bb","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":128.08334350585938,"y":1058.1111297607422,"z":"278dcf49.90646","wires":[["4b12505c.f36f1"]]},{"id":"a7454d61.95232","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":130.08334350585938,"y":1100.1111297607422,"z":"278dcf49.90646","wires":[["f9d42bd3.828658"]]},{"id":"b5ce413.1bdb4c","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":130.97222900390625,"y":1139.888910293579,"z":"278dcf49.90646","wires":[["f66ebbfb.32d6e8"]]},{"id":"4b12505c.f36f1","type":"websocket out","name":"/ws/sensor2","server":"a7949bb6.944e38","client":"","x":295.8611297607422,"y":1059.000036239624,"z":"278dcf49.90646","wires":[]},{"id":"f7d25572.6b1a78","type":"comment","name":"HTTP URL","info":"","x":116.75000762939453,"y":1489.5000047683716,"z":"278dcf49.90646","wires":[]},{"id":"a7d1929.d1c787","type":"http in","name":"","url":"/sensor","method":"get","x":121.75000762939453,"y":1528.7500257492065,"z":"278dcf49.90646","wires":[["b42c5f3.180c4a"]]},{"id":"b42c5f3.180c4a","type":"template","name":"All Sensor Visualize","field":"payload","template":"<!DOCTYPE html>\n<html>\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>Sensor Data Visualization</title>\n\t<link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css\" rel=\"stylesheet\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<script src=\"https://code.jquery.com/jquery-3.2.1.slim.min.js\" integrity=\"sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"//www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script>\n\t<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://oss.maxcdn.com/respond/1.4.2/respond.min.js\"></script>\n\t<script type=\"text/javascript\">\n\n// Sensor1 JS Section\n\nvar wsUrl1 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor1';\n\tvar socket;\n\t\tvar temperatureData1, humidityData1;\n\t\tvar temperatureOptions1, humidityOptions1;\n\t\tvar temperatureChart1, humidityChart1;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart1);\n\t\tfunction drawChart1() {\n\n\t// Data for Sensor1 temperature chart\n\t\ttemperatureData1 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Seosor1', 0],\n\t\t]);\n\n\t// Data for Sensor1 humidity chart\n\t\thumidityData1 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor1', 0]\n\t\t]);\n\n\t// Option for Sensor1 temperature chart\n\t\ttemperatureOptions1 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor1 humidity chart\n\t\thumidityOptions1 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\ttemperatureChart1 = new google.visualization.Gauge(document.getElementById('temperatureChart1'));\n\thumidityChart1 = new google.visualization.Gauge(document.getElementById('humidityChart1'));\n\n\ttemperatureChart1.draw(temperatureData1, temperatureOptions1);\n\thumidityChart1.draw(humidityData1, humidityOptions1);\n\n\t};\n\n// Sensor2 JS Section\n\nvar wsUrl2 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor2';\n\tvar socket;\n\t\tvar temperatureData2, humidityData2;\n\t\tvar temperatureOptions2, humidityOptions2;\n\t\tvar temperatureChart2, humidityChart2;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart2);\n\t\tfunction drawChart2() {\n\n\t// Data for Sensor2 temperature chart\n\ttemperatureData2 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor2', 0],\n\t\t]);\n\n\t// Data for Sensor2 humidity chart\n\thumidityData2 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor2', 0]\n\t\t]);\n\n\t// Option for Sensor2 temperature chart\n\ttemperatureOptions2 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor2 humidity chart\n\thumidityOptions2 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart2 = new google.visualization.Gauge(document.getElementById('temperatureChart2'));\n\thumidityChart2 = new google.visualization.Gauge(document.getElementById('humidityChart2'));\n\n\ttemperatureChart2.draw(temperatureData2, temperatureOptions2);\n\thumidityChart2.draw(humidityData2, humidityOptions2);\n\n\t};\n\n// Sensor3 JS Section\n\nvar wsUrl3 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor3';\n\tvar socket;\n\t\tvar temperatureData3, humidityData3;\n\t\tvar temperatureOptions3, humidityOptions3;\n\t\tvar temperatureChart3, humidityChart3;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart3);\n\t\tfunction drawChart3() {\n\n\t// Data for Sensor3 temperature chart\n\ttemperatureData3 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor3', 0],\n\t\t]);\n\n\t// Data for Sensor3 humidity chart\n\thumidityData3 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor3', 0]\n\t\t]);\n\n\t// Option for Sensor3 temperature chart\n\ttemperatureOptions3 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor3 humidity chart\n\thumidityOptions3 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart3 = new google.visualization.Gauge(document.getElementById('temperatureChart3'));\n\thumidityChart3 = new google.visualization.Gauge(document.getElementById('humidityChart3'));\n\n\ttemperatureChart3.draw(temperatureData3, temperatureOptions3);\n\thumidityChart3.draw(humidityData3, humidityOptions3);\n\n\t};\n\n// Sensor4 JS Section\n\nvar wsUrl4 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor4';\n\tvar socket;\n\t\tvar temperatureData4, humidityData4;\n\t\tvar temperatureOptions4, humidityOptions4;\n\t\tvar temperatureChart4, humidityChart4;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart4);\n\t\tfunction drawChart4() {\n\n\t// Data for Sensor4 temperature chart\n\ttemperatureData4 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor4', 0],\n\t\t]);\n\n\t// Data for Sensor4 humidity chart\n\thumidityData4 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor4', 0]\n\t\t]);\n\n\t// Option for Sensor4 temperature chart\n\ttemperatureOptions4 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor4 humidity chart\n\thumidityOptions4 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart4 = new google.visualization.Gauge(document.getElementById('temperatureChart4'));\n\thumidityChart4 = new google.visualization.Gauge(document.getElementById('humidityChart4'));\n\n\ttemperatureChart4.draw(temperatureData4, temperatureOptions4);\n\thumidityChart4.draw(humidityData4, humidityOptions4);\n\n\t};\n\n// Sensor5 JS Section\n\nvar wsUrl5 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor5';\n\tvar socket;\n\t\tvar temperatureData5, humidityData5;\n\t\tvar temperatureOptions5, humidityOptions5;\n\t\tvar temperatureChart5, humidityChart5;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart5);\n\t\tfunction drawChart5() {\n\n\t// Data for Sensor5 temperature chart\n\ttemperatureData5 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor5', 0],\n\t\t]);\n\n\t// Data for Sensor5 humidity chart\n\thumidityData5 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor5', 0]\n\t\t]);\n\n\t// Option for Sensor5 temperature chart\n\ttemperatureOptions5 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor5 humidity chart\n\thumidityOptions5 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart5 = new google.visualization.Gauge(document.getElementById('temperatureChart5'));\n\thumidityChart5 = new google.visualization.Gauge(document.getElementById('humidityChart5'));\n\n\ttemperatureChart5.draw(temperatureData5, temperatureOptions5);\n\thumidityChart5.draw(humidityData5, humidityOptions5);\n\n\t};\n\n// Sensor6 JS Section\n\nvar wsUrl6 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor6';\n\tvar socket;\n\t\tvar temperatureData6, humidityData6;\n\t\tvar temperatureOptions6, humidityOptions6;\n\t\tvar temperatureChart6, humidityChart6;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart6);\n\t\tfunction drawChart6() {\n\n\t// Data for Sensor6 temperature chart\n\ttemperatureData6 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor6', 0],\n\t\t]);\n\n\t// Data for Sensor6 humidity chart\n\thumidityData6 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor6', 0]\n\t\t]);\n\n\t// Option for Sensor6 temperature chart\n\ttemperatureOptions6 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor6 humidity chart\n\thumidityOptions6 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart6 = new google.visualization.Gauge(document.getElementById('temperatureChart6'));\n\thumidityChart6 = new google.visualization.Gauge(document.getElementById('humidityChart6'));\n\n\ttemperatureChart6.draw(temperatureData6, temperatureOptions6);\n\thumidityChart6.draw(humidityData6, humidityOptions6);\n\n\t};\n\n// Sensor7 JS Section\n\nvar wsUrl7 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor7';\n\tvar socket;\n\t\tvar temperatureData7, humidityData7;\n\t\tvar temperatureOptions7, humidityOptions7;\n\t\tvar temperatureChart7, humidityChart7;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart7);\n\t\tfunction drawChart7() {\n\n\t// Data for Sensor7 temperature chart\n\ttemperatureData7 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor7', 0],\n\t\t]);\n\n\t// Data for Sensor7 humidity chart\n\thumidityData7 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor7', 0]\n\t\t]);\n\n\t// Option for Sensor7 temperature chart\n\ttemperatureOptions7 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor7 humidity chart\n\thumidityOptions7 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart7 = new google.visualization.Gauge(document.getElementById('temperatureChart7'));\n\thumidityChart7 = new google.visualization.Gauge(document.getElementById('humidityChart7'));\n\n\ttemperatureChart7.draw(temperatureData7, temperatureOptions7);\n\thumidityChart7.draw(humidityData7, humidityOptions7);\n\n\t};\n\n// Sensor8 JS Section\n\nvar wsUrl8 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor8';\n\tvar socket;\n\t\tvar temperatureData8, humidityData8;\n\t\tvar temperatureOptions8, humidityOptions8;\n\t\tvar temperatureChart8, humidityChart8;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart8);\n\t\tfunction drawChart8() {\n\n\t// Data for Sensor8 temperature chart\n\ttemperatureData8 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor8', 0],\n\t\t]);\n\n\t// Data for Sensor8 humidity chart\n\thumidityData8 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor8', 0]\n\t\t]);\n\n\t// Option for Sensor8 temperature chart\n\ttemperatureOptions8 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor8 humidity chart\n\thumidityOptions8 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart8 = new google.visualization.Gauge(document.getElementById('temperatureChart8'));\n\thumidityChart8 = new google.visualization.Gauge(document.getElementById('humidityChart8'));\n\n\ttemperatureChart8.draw(temperatureData8, temperatureOptions8);\n\thumidityChart8.draw(humidityData8, humidityOptions8);\n\n\t};\n\n// Sensor1 Websocket Connect and Close\n      \nfunction connect1() {\n\tsocket = new WebSocket(wsUrl1);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update temperature data\n\ttemperatureData1.setValue(0, 1, sensorData.temp);\n\n\t// Update humidity data\n\thumidityData1.setValue(0, 1, sensorData.humidity);\n\n\ttemperatureChart1.draw(temperatureData1, temperatureOptions1);\n\thumidityChart1.draw(humidityData1, humidityOptions1);\n\n\t};\n};\n      \nfunction disconnect1() {\n\tsocket.close();\n};\n\n// Sensor2 Websocket Connect and Close\n      \nfunction connect2() {\n\tsocket = new WebSocket(wsUrl2);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor2 temperature data\n\ttemperatureData2.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor2 humidity data\n\thumidityData2.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart2.draw(temperatureData2, temperatureOptions2);\n\thumidityChart2.draw(humidityData2, humidityOptions2);\n\n\t};\n};\n\nfunction disconnect2() {\n\tsocket.close();\n};\n\n// Sensor3 Websocket Connect and Close\n      \nfunction connect3() {\n\tsocket = new WebSocket(wsUrl3);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor3 temperature data\n\ttemperatureData3.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor3 humidity data\n\thumidityData3.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart3.draw(temperatureData3, temperatureOptions3);\n\thumidityChart3.draw(humidityData3, humidityOptions3);\n\n\t};\n};\n\nfunction disconnect3() {\n\tsocket.close();\n};\n\n// Sensor4 Websocket Connect and Close\n      \nfunction connect4() {\n\tsocket = new WebSocket(wsUrl4);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor4 temperature data\n\ttemperatureData4.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor4 humidity data\n\thumidityData4.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart4.draw(temperatureData4, temperatureOptions4);\n\thumidityChart4.draw(humidityData4, humidityOptions4);\n\n\t};\n};\n\nfunction disconnect4() {\n\tsocket.close();\n};\n\n// Sensor5 Websocket Connect and Close\n      \nfunction connect5() {\n\tsocket = new WebSocket(wsUrl5);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor5 temperature data\n\ttemperatureData5.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor5 humidity data\n\thumidityData5.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart5.draw(temperatureData5, temperatureOptions5);\n\thumidityChart5.draw(humidityData5, humidityOptions5);\n\n\t};\n};\n\nfunction disconnect5() {\n\tsocket.close();\n};\n\n// Sensor6 Websocket Connect and Close\n      \nfunction connect6() {\n\tsocket = new WebSocket(wsUrl6);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor6 temperature data\n\ttemperatureData6.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor6 humidity data\n\thumidityData6.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart6.draw(temperatureData6, temperatureOptions6);\n\thumidityChart6.draw(humidityData6, humidityOptions6);\n\n\t};\n};\n\nfunction disconnect6() {\n\tsocket.close();\n};\n\n// Sensor7 Websocket Connect and Close\n      \nfunction connect7() {\n\tsocket = new WebSocket(wsUrl7);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor7 temperature data\n\ttemperatureData7.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor7 humidity data\n\thumidityData7.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart7.draw(temperatureData7, temperatureOptions7);\n\thumidityChart7.draw(humidityData7, humidityOptions7);\n\n\t};\n};\n\nfunction disconnect7() {\n\tsocket.close();\n};\n\n// Sensor8 Websocket Connect and Close\n      \nfunction connect8() {\n\tsocket = new WebSocket(wsUrl8);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor8 temperature data\n\ttemperatureData8.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor8 humidity data\n\thumidityData8.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart8.draw(temperatureData8, temperatureOptions8);\n\thumidityChart8.draw(humidityData8, humidityOptions8);\n\n\t};\n};\n\nfunction disconnect8() {\n\tsocket.close();\n};\n\n</script>\n\n</head>\n\n<body>\n<div>\n<!-- <div class=\"container\"> --> \n\t<h1> K5 IoT Sample App <small>< Realtime Meter with Websocket ></small></h1>\n</div>  \n\n<br>\n<h3>■ Websocket 接続 ■</h3>\n<div>\n\t<br><button onclick=\"connect1()\">Connect Sensor1</button></br>\n\t<br><button onclick=\"connect2()\">Connect Sensor2</button></br>\n\t<br><button onclick=\"connect3()\">Connect Sensor3</button></br>\n\t<br><button onclick=\"connect4()\">Connect Sensor4</button></br>\n\t<br><button onclick=\"connect5()\">Connect Sensor5</button></br>\n\t<br><button onclick=\"connect6()\">Connect Sensor5</button></br>\n\t<br><button onclick=\"connect7()\">Connect Sensor7</button></br>\n\t<br><button onclick=\"connect8()\">Connect Sensor8</button></br>\n</div>\n</br>\n<h3>■ Websocket 切断 ■</h3>\n<div>\n\t<br><button onclick=\"disconnect1()\">Disconnect Sensor1</button></br>\n\t<br><button onclick=\"disconnect2()\">Disconnect Sensor2</button></br>\n\t<br><button onclick=\"disconnect3()\">Disconnect Sensor3</button></br>\n\t<br><button onclick=\"disconnect4()\">Disconnect Sensor4</button></br>\n\t<br><button onclick=\"disconnect5()\">Disconnect Sensor5</button></br>\n\t<br><button onclick=\"disconnect6()\">Disconnect Sensor6</button></br>\n\t<br><button onclick=\"disconnect7()\">Disconnect Sensor7</button></br>\n\t<br><button onclick=\"disconnect8()\">Disconnect Sensor8</button></br>\n</div>\n<br>\n<h1>■ Temperature ■</h1>\n<div>\n\t<div id=\"temperatureChart1\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart2\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart3\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart4\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart5\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart6\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart7\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart8\" style=\"width: 200px; height: 200px; float:left;\"></div>\n</div>\n<br><br><br><br><br><br><br><br><br><br><br><br><br>\n<h1>■ Humidity ■</h1>\n<div>\n\t<div id=\"humidityChart1\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart2\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart3\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart4\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart5\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart6\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart7\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart8\" style=\"width: 200px; height: 200px; float:left;\"></div>\n</div>\n\n</body>\n</html>","x":329.75000762939453,"y":1528.7500257492065,"z":"278dcf49.90646","wires":[["fc0995f3.788e68"]]},{"id":"fc0995f3.788e68","type":"http response","name":"","x":521.7500076293945,"y":1528.7500257492065,"z":"278dcf49.90646","wires":[]},{"id":"f9d42bd3.828658","type":"websocket out","name":"/ws/sensor3","server":"437ce790.863708","client":"","x":297.61106872558594,"y":1099.7500553131104,"z":"278dcf49.90646","wires":[]},{"id":"f66ebbfb.32d6e8","type":"websocket out","name":"/ws/sensor4","server":"f45a52fa.a21f","client":"","x":298.61114501953125,"y":1139.999994277954,"z":"278dcf49.90646","wires":[]},{"id":"5a895938.bccef8","type":"function","name":"Data Modify for DB Insert","func":"msg.payload = \"insert into iotdata(sensorname, date, time, timestamp, temperature, humidity) values('\" + msg.payload.sensorname + \"','\" + msg.payload.date + \"','\" + msg.payload.time + \"','\" + msg.payload.timestamp + \"','\" + msg.payload.temperature + \"','\" + msg.payload.humidity + \"');\";\n\nreturn msg;","outputs":1,"x":549.0000305175781,"y":592.5,"z":"278dcf49.90646","wires":[["d3d1cd6a.127a8","82f53a58.cb8628"]]},{"id":"1159909d.ebd32f","type":"inject","name":"","topic":"","payload":"true","payloadType":"none","repeat":"","crontab":"","once":false,"x":172,"y":278,"z":"73d9648e.a2dc1c","wires":[["ded784d.0af8a78"]]},{"id":"93c187b4.85d598","type":"debug","name":"","active":true,"console":"false","complete":"false","x":1012,"y":278,"z":"73d9648e.a2dc1c","wires":[]},{"id":"b8b7aa53.3b3c48","type":"http request","name":"REST API GET","method":"GET","ret":"obj","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2/_past","x":702,"y":278,"z":"73d9648e.a2dc1c","wires":[["93c187b4.85d598","3159a510.afbb1a"]]},{"id":"ded784d.0af8a78","type":"template","name":"認証情報付与","field":"headers.Authorization","template":"Bearer testcode2","x":422,"y":278,"z":"73d9648e.a2dc1c","wires":[["b8b7aa53.3b3c48"]]},{"id":"c255f123.3fd89","type":"http request","name":"データ追加 [REST API]","method":"PUT","ret":"txt","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2","x":932,"y":462,"z":"73d9648e.a2dc1c","wires":[["bd6c1896.e751e8"]]},{"id":"c30dd7f0.9e5878","type":"template","name":"投入データ [JSON]","field":"payload","template":"{\"date\":\"20170626T13:39:00Z\",\"sensorname\":\"Sensor3\",\"location\":\"ServerRack3\",\"moisture\":45,\"temperature\":25}","x":552,"y":462,"z":"73d9648e.a2dc1c","wires":[["4545ded8.4906e"]]},{"id":"27a512b7.99b99e","type":"inject","name":"","topic":"","payload":"true","payloadType":"none","repeat":"","crontab":"","once":false,"x":172,"y":462,"z":"73d9648e.a2dc1c","wires":[["89be0899.938918"]]},{"id":"89be0899.938918","type":"template","name":"認証情報付与","field":"headers.Authorization","template":"Bearer testcode2","x":342,"y":462,"z":"73d9648e.a2dc1c","wires":[["c30dd7f0.9e5878"]]},{"id":"bd6c1896.e751e8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1132,"y":462,"z":"73d9648e.a2dc1c","wires":[]},{"id":"4545ded8.4906e","type":"json","name":"","x":732,"y":462,"z":"73d9648e.a2dc1c","wires":[["c8bf7a85.a281c8","c255f123.3fd89"]]},{"id":"c8bf7a85.a281c8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":892,"y":522,"z":"73d9648e.a2dc1c","wires":[]},{"id":"992e1e81.dc727","type":"function","name":"ダミーデータ生成（センサー3）","func":"var getTimestamp = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2) + 'T';\nts += (\"0\"+date.getHours()).slice(-2) + ':';\nts += (\"0\"+date.getMinutes()).slice(-2) + ':';\nts += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n\nreturn ts;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor3\";\n\n// Object of place\nvar location1 = \"ServerRack3\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n    \"location\": location1,\n    \"date\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 30 + 25)*100)/100 ,\n    \"moisture\": Math.floor(( Math.random() * 71 + 30)*100)/100\n};\nreturn msg;\n","outputs":1,"x":402,"y":582,"z":"73d9648e.a2dc1c","wires":[["e451ff4d.621b4"]]},{"id":"364e3a06.7da3d6","type":"inject","name":"","topic":"","payload":"true","payloadType":"none","repeat":"","crontab":"","once":false,"x":172,"y":582,"z":"73d9648e.a2dc1c","wires":[["992e1e81.dc727"]]},{"id":"e451ff4d.621b4","type":"template","name":"認証情報付与","field":"headers.Authorization","template":"Bearer testcode2","x":662,"y":582,"z":"73d9648e.a2dc1c","wires":[["3d2ef7c7.edb9f8","5b1452df.ae42ec"]]},{"id":"5b1452df.ae42ec","type":"http request","name":"データ追加 [REST API]","method":"PUT","ret":"txt","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2","x":912,"y":582,"z":"73d9648e.a2dc1c","wires":[["b668c174.6e2e2"]]},{"id":"b668c174.6e2e2","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1132,"y":582,"z":"73d9648e.a2dc1c","wires":[]},{"id":"3d2ef7c7.edb9f8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":872,"y":642,"z":"73d9648e.a2dc1c","wires":[]},{"id":"4c7dfb69.754c54","type":"comment","name":"REST API GET","info":"","x":182,"y":238,"z":"73d9648e.a2dc1c","wires":[]},{"id":"e2df5d96.e0142","type":"comment","name":"REST API PUT","info":"","x":182,"y":422,"z":"73d9648e.a2dc1c","wires":[]},{"id":"b2be1835.932418","type":"comment","name":"REST API Random Data PUT","info":"","x":222,"y":542,"z":"73d9648e.a2dc1c","wires":[]},{"id":"57969aef.776144","type":"http in","name":"","url":"/api_get","method":"get","x":187,"y":331,"z":"73d9648e.a2dc1c","wires":[["ded784d.0af8a78"]]},{"id":"3159a510.afbb1a","type":"http response","name":"","x":995,"y":325,"z":"73d9648e.a2dc1c","wires":[]},{"id":"149a3845.c73678","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor1 Temperature 1 hour","group":"sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1214.250015258789,"y":698.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"5dc46343.fbbf0c","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor1 Realtime Temp Gauge","group":"sensor1 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1225.500015258789,"y":808.5000143051147,"z":"278dcf49.90646","wires":[]},{"id":"72bc50c8.5e0af","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor1 Temperature 12 hours","group":"sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1221.250015258789,"y":734.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"99bec8ff.a23098","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor1 Temperature 1week","group":"sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1216.250015258789,"y":770.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"5a35bc25.b30ae4","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor2 Temperature 1 hour","group":"sensor2 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1217.250015258789,"y":848.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"3fdc5d0d.4810d2","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor2 Realtime Temp Gauge","group":"sensor2 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1230.000015258789,"y":963.2500171661377,"z":"278dcf49.90646","wires":[]},{"id":"b8483e6d.64d42","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor2 Temperature 12 hours","group":"sensor2 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1225.250015258789,"y":886.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"14ae7fcc.43fd5","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor2 Temperature 1week","group":"sensor2 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1219.250015258789,"y":924.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"43d523d0.329afc","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor3 Temperature 1 hour","group":"sensor3 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1219.250015258789,"y":1003.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"6bece27b.ca507c","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor3 Realtime Temp Gauge","group":"sensor3 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1230.750015258789,"y":1118.0000200271606,"z":"278dcf49.90646","wires":[]},{"id":"1aec9bcf.256de4","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor3 Temperature 12 hours","group":"sensor3 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1228.250015258789,"y":1041.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"6a9c7b0c.371454","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor3 Temperature 1week","group":"sensor3 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1221.250015258789,"y":1080.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"8956b85.1f84148","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor4 Temperature 1 hour","group":"sensor4 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1223.250015258789,"y":1157.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"9848d2c.0e4113","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor4 Realtime Temp Gauge","group":"sensor4 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1236.750015258789,"y":1271.2500219345093,"z":"278dcf49.90646","wires":[]},{"id":"b612ff0.25794","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor4 Temperature 12 hours","group":"sensor4 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1232.250015258789,"y":1195.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"b97f7943.c1b948","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor4 Temperature 1week","group":"sensor4 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1226.250015258789,"y":1233.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"3abd525.50115ae","type":"http in","name":"GET /dash","url":"/dash","method":"get","x":116.75000762939453,"y":1570.2500257492065,"z":"278dcf49.90646","wires":[["e2f19cc9.803f5"]]},{"id":"e2f19cc9.803f5","type":"template","name":"Redirect URL","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1><span style = 'color:red; font-size:100%; font-weight:bold; font-family: serif;'>■ K5 IoT Platform Visualization Sample ■</span></h1>\n<br>\n\n<p>■ 設置センサー 一覧 ■</p>\n\n<br>\n<div id=\"example-table\" style=\"width: 60%;\"></div>\n<br>\n\n<!--\n<br>\n<div id=\"table_div\" style=\"width: 100%; \"></div>\n<br>\n-->\n\n<!--\n<style type='text/css'>\n  .bold-green-font {\n    font-weight: bold;\n    color: green;\n  }\n\n  .bold-font {\n    font-weight: bold;\n  }\n\n  .right-text {\n    text-align: right;\n  }\n\n  .large-font {\n    font-size: 20px;\n  }\n\n  .italic-darkblue-font {\n    font-style: italic;\n    color: darkblue;\n  }\n\n  .italic-purple-font {\n    font-style: italic;\n    color: purple;\n  }\n\n  .underline-blue-font {\n    text-decoration: underline;\n    color: blue;\n  }\n\n  .gold-border {\n    border: 3px solid gold;\n  }\n\n  .deeppink-border {\n    border: 3px solid deeppink;\n  }\n\n  .orange-background {\n    background-color: orange;\n  }\n\n  .orchid-background {\n    background-color: orchid;\n  }\n\n  .beige-background {\n    background-color: beige;\n  }\n\n</style>\n-->\n\n<script>\n\n$(\"#example-table\").tabulator({\n\tcolumns:[\n\t\t{title:\"SensorName\", field:\"sensorname\", sortable:true, width:100},\n\t\t{title:\"Room\", field:\"room\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Location\", field:\"location\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Registration Date\", field:\"date\", sortable:true, width:150},\n\t\t{title:\"Comment\", field:\"comment\", sortable:false, width:500},\n\t],\n});\n\n$(\"#example-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/api1/v1/sensor_data/all\");\n\n$(window).resize(function(){\n\t$(\"#example-table\").tabulator(\"redraw\");\n});\n\n\n//google.load('visualization', '1', {packages:['table']});\n//google.setOnLoadCallback(drawTable);\n\n//function drawTable() {\n\n//\tvar cssClassNames = {\n//\t\t'headerRow': 'italic-darkblue-font large-font bold-font',\n//\t\t'tableRow': '',\n//\t\t'oddTableRow': 'beige-background',\n//\t\t'selectedTableRow': 'orange-background large-font',\n//\t\t'hoverTableRow': '',\n//\t\t'headerCell': 'gold-border',\n//\t\t'tableCell': '',\n//\t\t'rowNumberCell': 'underline-blue-font'\n//\t\t};\n\n//var options = {'showRowNumber': true, 'allowHtml': true, 'cssClassNames': cssClassNames};\n\n//var data = new google.visualization.DataTable();\n//\tdata.addColumn('string', 'Location');\n//\tdata.addColumn('string', 'Rack Name');\n//\tdata.addColumn('string', 'Sensor Name');\n//\tdata.addColumn('boolean', 'Status');\n//\tdata.addColumn('string', 'Temperature');\n//\tdata.addColumn('string', 'Humidity');\n//\tdata.addColumn('string', 'Battery Change Date');\n//\tdata.addRows([\n//\t\t['29F Server Room A','Server Rack No1','Sensor1',true,'26.12','54.31','2017/06/26' ],\n//\t\t['29F Server Room A','Server Rack No3','Sensor2',true,'27.23','56.44','2017/05/20' ],\n//\t\t['29F Server Room B','Server Rack No2','Sensor3',false,'25.22','53.22','2017/04/14' ],\n//\t\t['29F Server Room C','Server Rack No1','Sensor4',true,'26.89','54.19','2017/06/20' ],\n//\t\t['29F Server Room D','Server Rack No4','Sensor5',true,'25.11','58.36','2017/05/10' ],\n//\t\t['29F Server Room E','Server Rack No8','Sensor6',false,'23.34','51.22','2017/04/12' ],\n//\t\t['29F Server Room E','Server Rack No4','Sensor6',true,'24.21','50.12','2017/04/12' ],\n//\t\t['29F Server Room E','Server Rack No5','Sensor6',true,'23.86','48.31','2017/04/12' ]\n//\t\t]);\n\n//var table = new google.visualization.Table(document.getElementById('table_div'));\n//\ttable.draw(data, {showRowNumber: true});\n//}\n\nfunction goTop1(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/1\");\n}\nfunction goTop2(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/5\");\n}\nfunction goTop3(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/0\");\n}\nfunction goTop4(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/2\");\n}\nfunction goTop5(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/3\");\n}\nfunction goTop6(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/4\");\n}\nfunction goTop7(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/6\");\n}\nfunction goTop8(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/7\");\n}\nfunction goTop9(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/sensor\");\n}\nfunction goTop10(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/csv_get\");\n}\nfunction goTop11(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/sensor_info\");\n}\n\n</script>\n\n<form>\n<p> ■周辺温度ダッシュボード■</p>\n\n<br>\n<input type=\"button\" value=\"温度ステータス\" onclick=\"goTop1()\">\n</br>\n<br>\n\n<p> ■湿度ダッシュボード■ </p>\n<br>\n<input type=\"button\" value=\"湿度ステータス\" onclick=\"goTop2()\">\n</br>\n<br>\n<p> ■周辺温度グラフチャート■</p>\n<br>\n<input type=\"button\" value=\"1時間温度推移グラフ\" onclick=\"goTop3()\">\n</br>\n<br>\n<input type=\"button\" value=\"12時間温度推移グラフ\" onclick=\"goTop4()\">\n</br>\n<br>\n<input type=\"button\" value=\"1週間温度推移グラフ\" onclick=\"goTop5()\">\n</br>\n<br>\n<p> ■湿度グラフチャート■</p>\n<br>\n<input type=\"button\" value=\"1時間湿度推移グラフ\" onclick=\"goTop6()\">\n</br>\n<br>\n<input type=\"button\" value=\"12時間湿度推移グラフ\" onclick=\"goTop7()\">\n</br>\n<br>\n<input type=\"button\" value=\"1週間湿度推移グラフ\" onclick=\"goTop8()\">\n</br>\n<br>\n<p> ■温湿度ゲージ■</p>\n<br>\n<input type=\"button\" value=\"温湿度ゲージメーター表示\" onclick=\"goTop9()\">\n</br>\n<br>\n<p> ■CSVファイルダウンロード■</p>\n<br>\n<input type=\"button\" value=\"CSVダウンロード\" onclick=\"goTop10()\">\n</br>\n<br>\n<p> ■センサー管理メニュー■</p>\n<br>\n<input type=\"button\" value=\"センサー管理\" onclick=\"goTop11()\">\n</br>\n</form>\n\n\n\n\n</body>\n</html>\n","x":310.75001525878906,"y":1571.5000257492065,"z":"278dcf49.90646","wires":[["b9fcfcd0.aa396"]]},{"id":"b9fcfcd0.aa396","type":"http response","name":"","x":521.0000152587891,"y":1572.7500247955322,"z":"278dcf49.90646","wires":[]},{"id":"644a4920.79cca8","type":"function","name":"Sensor1 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":652.75,"y":868.9999942779541,"z":"278dcf49.90646","wires":[["559d6b97.e372c4","1e3a8572.b8085b","d7b856f7.acf4f8","cdb37467.2c2f48"]]},{"id":"d5dff450.6d6df8","type":"function","name":"Sensor2 Humid Payload","func":"return {payload:msg.payload.humidity};\n","outputs":1,"x":651.2222480773926,"y":908.7500972747803,"z":"278dcf49.90646","wires":[["bbeea886.918808","55865341.63937c","5d6de81c.a8fd38","80f4b4cb.f710f8"]]},{"id":"f90bdb15.d36b38","type":"function","name":"Sensor3 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":652.9166870117188,"y":949.1667423248291,"z":"278dcf49.90646","wires":[["7858a638.5db578","197b4c11.aa9b54","f0dd0b1a.24d708","c7da75a3.972cc8"]]},{"id":"5da4a37f.282c9c","type":"function","name":"Sensor4 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":652.611083984375,"y":990.6389713287354,"z":"278dcf49.90646","wires":[["acfab848.bbd448","8996a7df.0ba558","69c9c696.7e7a98","223184cd.803dac"]]},{"id":"559d6b97.e372c4","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor1 Humidity 1 hour","group":"sensor1 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1217.250015258789,"y":1314.2500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"cdb37467.2c2f48","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor1 Realtime Humidity Gauge","group":"sensor1 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1251.750015258789,"y":1427.250023841858,"z":"278dcf49.90646","wires":[]},{"id":"1e3a8572.b8085b","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor1 Humidity 12 hours","group":"sensor1 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1226.2500190734863,"y":1354.2500162124634,"z":"278dcf49.90646","wires":[[],[]]},{"id":"d7b856f7.acf4f8","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor1 Humidity 1week","group":"sensor1 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1221.2500190734863,"y":1390.2500162124634,"z":"278dcf49.90646","wires":[[],[]]},{"id":"55865341.63937c","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor2 Humidity 1 hour","group":"sensor2 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1222.2500190734863,"y":1467.0000171661377,"z":"278dcf49.90646","wires":[[],[]]},{"id":"bbeea886.918808","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor2 Realtime Humidity Gauge","group":"sensor2 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1257.500015258789,"y":1582.0000257492065,"z":"278dcf49.90646","wires":[]},{"id":"5d6de81c.a8fd38","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor2 Humidity 12 hours","group":"sensor2 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1234.0000228881836,"y":1506.250018119812,"z":"278dcf49.90646","wires":[[],[]]},{"id":"80f4b4cb.f710f8","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor2 Humidity 1week","group":"sensor2 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1228.0000228881836,"y":1544.250018119812,"z":"278dcf49.90646","wires":[[],[]]},{"id":"197b4c11.aa9b54","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor3 Humidity 1 hour","group":"sensor3 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1225.5000228881836,"y":1623.2500190734863,"z":"278dcf49.90646","wires":[[],[]]},{"id":"7858a638.5db578","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor3 Realtime Humidity Gauge","group":"sensor3 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1260.750015258789,"y":1736.7500286102295,"z":"278dcf49.90646","wires":[]},{"id":"f0dd0b1a.24d708","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor3 Humidity 12 hours","group":"sensor3 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1234.5000228881836,"y":1661.2500200271606,"z":"278dcf49.90646","wires":[[],[]]},{"id":"c7da75a3.972cc8","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor3 Humidity 1week","group":"sensor3 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1227.5000228881836,"y":1700.2500200271606,"z":"278dcf49.90646","wires":[[],[]]},{"id":"8996a7df.0ba558","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor4 Humidity 1 hour","group":"sensor4 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1229.5000228881836,"y":1777.2500219345093,"z":"278dcf49.90646","wires":[[],[]]},{"id":"acfab848.bbd448","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor4 Realtime Humidity Gauge","group":"sensor4 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1259.250015258789,"y":1891.2500314712524,"z":"278dcf49.90646","wires":[]},{"id":"69c9c696.7e7a98","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor4 Humidity 12 hours","group":"sensor4 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1237.250015258789,"y":1815.2500219345093,"z":"278dcf49.90646","wires":[[],[]]},{"id":"223184cd.803dac","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor4 Humidity 1week","group":"sensor4 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1228.7500228881836,"y":1853.250023841858,"z":"278dcf49.90646","wires":[[],[]]},{"id":"16ccd0d2.f3de0f","type":"http in","name":"","url":"/csv_get","method":"get","x":126.25000762939453,"y":1653.0000047683716,"z":"278dcf49.90646","wires":[["5a7c04e6.a2babc"]]},{"id":"5a7c04e6.a2babc","type":"file in","name":"","filename":"test_20170707.csv","format":"","x":331.25001525878906,"y":1653.0000257492065,"z":"278dcf49.90646","wires":[["9ccec2ed.46526"]]},{"id":"9ccec2ed.46526","type":"http response","name":"","x":526.2500076293945,"y":1654.2500047683716,"z":"278dcf49.90646","wires":[]},{"id":"8581e87e.9f77d8","type":"http in","name":"","url":"/download","method":"get","x":107.50000762939453,"y":1613.0000047683716,"z":"278dcf49.90646","wires":[["2c4a5b49.15dd44"]]},{"id":"2c4a5b49.15dd44","type":"template","name":"CSV Download","field":"payload","template":"<!doctype html>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Download Sample</title>\n    </head>\n    <body>\n        <script type='text/javascript'>\n            function handleDownload() {\n                var content = 'あいうえお';\n                var blob = new Blob([ content ], { \"type\" : \"text/plain\" });\n\n                if (window.navigator.msSaveBlob) { \n                    window.navigator.msSaveBlob(blob, \"test.txt\"); \n\n                    // msSaveOrOpenBlobの場合はファイルを保存せずに開ける\n                    window.navigator.msSaveOrOpenBlob(blob, \"test.txt\"); \n                } else {\n                    document.getElementById(\"download\").href = window.URL.createObjectURL(blob);\n                }\n            }\n        </script>\n        <a id=\"download\" href=\"#\" download=\"test.txt\" onclick=\"handleDownload()\">ダウンロード</a>\n    </body>\n</html>","x":317.50001525878906,"y":1614.2500257492065,"z":"278dcf49.90646","wires":[["4c17782d.3cf3c8"]]},{"id":"4c17782d.3cf3c8","type":"http response","name":"","x":533.7500076293945,"y":1620.5000047683716,"z":"278dcf49.90646","wires":[]},{"id":"c26e82c4.31bc9","type":"function","name":"Create Table iotdata","func":"msg.payload = \"create table iotdata (sensorname varchar(20), date date, time time, temperature real, humidity real);\";\n\nreturn msg;","outputs":1,"x":371.25,"y":690,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"dd617e2e.77943","type":"function","name":"Create dummy rundom data for Sensor5","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor5\";\n\n// Object of place\nvar location1 = \"ServerRack5\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":388,"y":287,"z":"278dcf49.90646","wires":[["abded07e.46bcf"]]},{"id":"48065213.b35a7c","type":"function","name":"Create dummy rundom data for Sensor6","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor6\";\n\n// Object of place\nvar location1 = \"ServerRack6\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":388,"y":323,"z":"278dcf49.90646","wires":[["abded07e.46bcf"]]},{"id":"359b4f11.b9378","type":"function","name":"Create dummy rundom data for Sensor7","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor7\";\n\n// Object of place\nvar location1 = \"ServerRack7\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":389,"y":362,"z":"278dcf49.90646","wires":[["abded07e.46bcf"]]},{"id":"4c492a4a.c9fbb4","type":"function","name":"Create dummy rundom data for Sensor8","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor8\";\n\n// Object of place\nvar location1 = \"ServerRack8\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":389,"y":399,"z":"278dcf49.90646","wires":[["abded07e.46bcf"]]},{"id":"e6fbdd9c.1848e","type":"websocket out","name":"/ws/sensor5","server":"54192100.1d709","client":"","x":300.1666564941406,"y":1180,"z":"278dcf49.90646","wires":[]},{"id":"11ff1eb.339c9e1","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":132.61111450195312,"y":1178.9998931884766,"z":"278dcf49.90646","wires":[["e6fbdd9c.1848e"]]},{"id":"b6e122f5.0ce6e","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":132.5,"y":1219.444387435913,"z":"278dcf49.90646","wires":[["c83ad915.b2dd18"]]},{"id":"6fa60e72.dbbf8","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":134.5,"y":1261.444387435913,"z":"278dcf49.90646","wires":[["1e711abb.571ee5"]]},{"id":"3f106af7.5e9b76","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":135.38888549804688,"y":1301.22216796875,"z":"278dcf49.90646","wires":[["1993cc84.4fb113"]]},{"id":"c83ad915.b2dd18","type":"websocket out","name":"/ws/sensor6","server":"5945612.f2a34a","client":"","x":300.2777862548828,"y":1220.333293914795,"z":"278dcf49.90646","wires":[]},{"id":"1e711abb.571ee5","type":"websocket out","name":"/ws/sensor7","server":"13fa2ec7.0e6081","client":"","x":302.02772521972656,"y":1261.0833129882812,"z":"278dcf49.90646","wires":[]},{"id":"1993cc84.4fb113","type":"websocket out","name":"/ws/sensor8","server":"7bf18ae5.ceac64","client":"","x":303.0278015136719,"y":1301.333251953125,"z":"278dcf49.90646","wires":[]},{"id":"a1c1bf52.77edd","type":"function","name":"Sensor5 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":651.25,"y":1032.5,"z":"278dcf49.90646","wires":[["87a9f0dd.5b4f3","4767a421.2d2dac","846d0c31.04e64","9d86fb28.7c6268"]]},{"id":"1ec1795c.cd7d37","type":"function","name":"Sensor6 Temp Payload","func":"return {payload:msg.payload.temperature};\n","outputs":1,"x":649.7222480773926,"y":1072.2501029968262,"z":"278dcf49.90646","wires":[["88d46161.a7fbd","eedcad59.74e69","f4d10b1d.7092e8","45ecb484.1d96ac"]]},{"id":"42fd3e7e.95556","type":"function","name":"Sensor7 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":650.1667022705078,"y":1111.4167652130127,"z":"278dcf49.90646","wires":[["2c66c750.ba7ca8","1a9298c4.103207","c13fd3df.bc066","26e22de5.a034b2"]]},{"id":"65dd1676.b4dd08","type":"function","name":"Sensor8 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":651.111083984375,"y":1154.1389770507812,"z":"278dcf49.90646","wires":[["f1eeff64.ac045","1dc78b8b.642804","1edb2f8f.64b14","45eb1622.a0e948"]]},{"id":"bdd65f4d.a41fb","type":"function","name":"Sensor5 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":652.5555419921875,"y":1196.3333740234375,"z":"278dcf49.90646","wires":[["cf700ca9.dc648","874ff28f.1cf58","ce088257.d0021","9023e19d.9e9a7"]]},{"id":"22d91f97.59f66","type":"function","name":"Sensor6 Humid Payload","func":"return {payload:msg.payload.humidity};\n","outputs":1,"x":651.0277900695801,"y":1236.0834770202637,"z":"278dcf49.90646","wires":[["36d160e5.18bb","7712fcd5.ee3e84","81a15f83.13926","925cecee.2b673"]]},{"id":"4ad899c7.f29a38","type":"function","name":"Sensor7 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":652.7222290039062,"y":1276.5001220703125,"z":"278dcf49.90646","wires":[["c4cff065.50344","d1d130c6.4bdf1","565fd6ad.289908","49b7457e.35f7fc"]]},{"id":"40dc09b1.60b488","type":"function","name":"Sensor8 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":652.4166259765625,"y":1317.9723510742188,"z":"278dcf49.90646","wires":[["bc91a50b.836a78","ec01cb8.cbdce38","fb38b66b.27c388","84fb88d4.9a6db8"]]},{"id":"87a9f0dd.5b4f3","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor5 Temperature 1 hour","group":"sensor5 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1526.2500228881836,"y":698.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"9d86fb28.7c6268","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor5 Realtime Temp Gauge","group":"sensor5 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1537.5000228881836,"y":809.0000143051147,"z":"278dcf49.90646","wires":[]},{"id":"4767a421.2d2dac","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor5 Temperature 12 hours","group":"sensor5 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1533.2500228881836,"y":734.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"846d0c31.04e64","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor5 Temperature 1week","group":"sensor5 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1528.2500228881836,"y":770.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"88d46161.a7fbd","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor6 Temperature 1 hour","group":"sensor6 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1529.2500228881836,"y":848.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"45ecb484.1d96ac","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor6 Realtime Temp Gauge","group":"sensor6 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1542.0000228881836,"y":963.7500171661377,"z":"278dcf49.90646","wires":[]},{"id":"eedcad59.74e69","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor6 Temperature 12 hours","group":"sensor6 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1537.2500228881836,"y":886.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"f4d10b1d.7092e8","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor6 Temperature 1week","group":"sensor6 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1531.2500228881836,"y":924.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"2c66c750.ba7ca8","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor7 Temperature 1 hour","group":"sensor7 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1531.2500228881836,"y":1003.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"26e22de5.a034b2","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor7 Realtime Temp Gauge","group":"sensor7 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1542.7500228881836,"y":1118.5000200271606,"z":"278dcf49.90646","wires":[]},{"id":"1a9298c4.103207","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor7 Temperature 12 hours","group":"sensor7 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1540.2500228881836,"y":1041.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"c13fd3df.bc066","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor7 Temperature 1week","group":"sensor7 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1533.2500228881836,"y":1080.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"f1eeff64.ac045","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor8 Temperature 1 hour","group":"sensor8 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1535.2500228881836,"y":1157.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"45eb1622.a0e948","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor8 Realtime Temp Gauge","group":"sensor8 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1548.7500228881836,"y":1271.7500219345093,"z":"278dcf49.90646","wires":[]},{"id":"1dc78b8b.642804","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor8 Temperature 12 hours","group":"sensor8 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1544.2500228881836,"y":1195.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"1edb2f8f.64b14","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor8 Temperature 1week","group":"sensor8 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1538.2500228881836,"y":1233.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"cf700ca9.dc648","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor5 Humidity 1 hour","group":"sensor5 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1529.2500228881836,"y":1314.7500104904175,"z":"278dcf49.90646","wires":[[],[]]},{"id":"9023e19d.9e9a7","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor5 Realtime Humidity Gauge","group":"sensor5 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1563.7500228881836,"y":1427.750023841858,"z":"278dcf49.90646","wires":[]},{"id":"874ff28f.1cf58","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor5 Humidity 12 hours","group":"sensor5 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1538.2500267028809,"y":1354.7500162124634,"z":"278dcf49.90646","wires":[[],[]]},{"id":"ce088257.d0021","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor5 Humidity 1week","group":"sensor5 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1533.2500267028809,"y":1390.7500162124634,"z":"278dcf49.90646","wires":[[],[]]},{"id":"36d160e5.18bb","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor6 Humidity 1 hour","group":"sensor6 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1534.2500267028809,"y":1467.5000171661377,"z":"278dcf49.90646","wires":[[],[]]},{"id":"7712fcd5.ee3e84","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor6 Humidity 12 hours","group":"sensor6 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1546.0000305175781,"y":1506.750018119812,"z":"278dcf49.90646","wires":[[],[]]},{"id":"81a15f83.13926","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor6 Humidity 1week","group":"sensor6 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1540.0000305175781,"y":1544.750018119812,"z":"278dcf49.90646","wires":[[],[]]},{"id":"925cecee.2b673","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor6 Realtime Humidity Gauge","group":"sensor6 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1569.5000228881836,"y":1582.5000257492065,"z":"278dcf49.90646","wires":[]},{"id":"c4cff065.50344","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor7 Humidity 1 hour","group":"sensor7 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1537.5000305175781,"y":1623.7500190734863,"z":"278dcf49.90646","wires":[[],[]]},{"id":"d1d130c6.4bdf1","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor7 Humidity 12 hours","group":"sensor7 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1546.5000305175781,"y":1661.7500200271606,"z":"278dcf49.90646","wires":[[],[]]},{"id":"565fd6ad.289908","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor7 Humidity 1week","group":"sensor7 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1539.5000305175781,"y":1700.7500200271606,"z":"278dcf49.90646","wires":[[],[]]},{"id":"49b7457e.35f7fc","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor7 Realtime Humidity Gauge","group":"sensor7 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1572.7500228881836,"y":1737.2500286102295,"z":"278dcf49.90646","wires":[]},{"id":"bc91a50b.836a78","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor8 Humidity 1 hour","group":"sensor8 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1541.5000305175781,"y":1777.7500219345093,"z":"278dcf49.90646","wires":[[],[]]},{"id":"ec01cb8.cbdce38","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor8 Humidity 12 hours","group":"sensor8 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1549.2500228881836,"y":1815.7500219345093,"z":"278dcf49.90646","wires":[[],[]]},{"id":"fb38b66b.27c388","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor8 Humidity 1week","group":"sensor8 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1540.7500305175781,"y":1853.750023841858,"z":"278dcf49.90646","wires":[[],[]]},{"id":"84fb88d4.9a6db8","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor8 Realtime Humidity Gauge","group":"sensor8 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1571.2500228881836,"y":1891.7500314712524,"z":"278dcf49.90646","wires":[]},{"id":"efbd6756.c46848","type":"function","name":"Select * from iotdata","func":"msg.payload = \"select * from iotdata;\";\n\nreturn msg;","outputs":1,"x":365.25,"y":982.5,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"4972cbc5.aa6054","type":"comment","name":"Create Table","info":"","x":122,"y":691,"z":"73d9648e.a2dc1c","wires":[]},{"id":"df0a86d9.811a28","type":"function","name":"Insert into iotdata","func":"msg.payload = \"insert into iotdata(sensorname, date, time, temperature, humidity) values('Sensor4','2017-07-12','09:19:00',21.46,57.18);\";\n\nreturn msg;","outputs":1,"x":365.75,"y":1310,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"c8834022.f7ca1","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":143.74999618530273,"y":1310.4999980926514,"z":"73d9648e.a2dc1c","wires":[["df0a86d9.811a28"]]},{"id":"1e4e8a58.802cb6","type":"function","name":"Delete From Table","func":"msg.payload = \"delete from sensor_data where sensorname='';\";\n\nreturn msg;","outputs":1,"x":369,"y":1349,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"a3750954.c6dc38","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":144,"y":1349.5,"z":"73d9648e.a2dc1c","wires":[["1e4e8a58.802cb6"]]},{"id":"d3d1cd6a.127a8","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":743.25,"y":620.5,"z":"278dcf49.90646","wires":[["8f7caa53.62de68"]]},{"id":"8f7caa53.62de68","type":"debug","name":"","active":false,"console":"false","complete":"false","x":981,"y":537.75,"z":"278dcf49.90646","wires":[]},{"id":"495ee31c.f61eec","type":"function","name":"Select * from pg_class","func":"msg.payload = \"select * from pg_class;\";\n\nreturn msg;","outputs":1,"x":381.91668701171875,"y":790.7777099609375,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"128c6d30.a6dee3","type":"function","name":"Select * from information_schema","func":"msg.payload = \"select * from information_schema.columns where table_name = 'sensor_data' ORDER BY ordinal_position;\";\n\nreturn msg;","outputs":1,"x":416.58331298828125,"y":827.22216796875,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"402bc6a9.bbbb38","type":"comment","name":"Select Tables","info":"","x":120.33331298828125,"y":780.72216796875,"z":"73d9648e.a2dc1c","wires":[]},{"id":"3770cbe9.d92394","type":"function","name":"Add Collum in the Table","func":"msg.payload = \"alter table iotdata add column location varchar(20);\";\n\nreturn msg;","outputs":1,"x":378.02777099609375,"y":1192.7777099609375,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"a3e7dc62.8c5db","type":"http in","name":"","url":"/tables_sensors","method":"get","x":146.44444274902344,"y":826.888916015625,"z":"73d9648e.a2dc1c","wires":[["128c6d30.a6dee3"]]},{"id":"719743f5.5761cc","type":"function","name":"Create Table sensors","func":"msg.payload = \"create table sensors (sensorname varchar(20), location varchar(20), date date, comment varchar(100));\";\n\nreturn msg;","outputs":1,"x":375.02777099609375,"y":734.5555419921875,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"4b657afe.aa3ce4","type":"function","name":"Delete Collum from the Table","func":"msg.payload = \"alter table iotdata drop column location;\";\n\nreturn msg;","outputs":1,"x":393.6944580078125,"y":1152.4443359375,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"63099f2d.d4c69","type":"comment","name":"Add / Delete Collum Table","info":"","x":165.44444274902344,"y":1119.4443359375,"z":"73d9648e.a2dc1c","wires":[]},{"id":"386603c2.87ab1c","type":"function","name":"Insert into sensors","func":"msg.payload = \"insert into sensors(sensorname, location, date, comment) values('Sensor8','ストレージラック3','2017-07-14','サーバルームAに設置、TI SensorTAG使用');\";\n\nreturn msg;","outputs":1,"x":368.9166564941406,"y":1269.333251953125,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"d4013a01.ae2808","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":142.91665649414062,"y":1268.833251953125,"z":"73d9648e.a2dc1c","wires":[["386603c2.87ab1c"]]},{"id":"e3e75dd5.9877c","type":"comment","name":"Add / Delete Data","info":"","x":143.66665649414062,"y":1227.833251953125,"z":"73d9648e.a2dc1c","wires":[]},{"id":"cf21867c.dd1fa8","type":"function","name":"Select * from sensor_data","func":"msg.payload = \"select * from sensor_data;\";\n\nreturn msg;","outputs":1,"x":383.02777099609375,"y":944.7777099609375,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"1457a4b.986925b","type":"debug","name":"","active":true,"console":"false","complete":"false","x":1044.7777709960938,"y":835.5277099609375,"z":"73d9648e.a2dc1c","wires":[]},{"id":"f3196a7c.3b7588","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":828.0277709960938,"y":875.5277099609375,"z":"73d9648e.a2dc1c","wires":[["1457a4b.986925b","8f85921d.34646"]]},{"id":"72590cfc.c35094","type":"http in","name":"","url":"/select_sensors","method":"get","x":148.55555725097656,"y":944.6666259765625,"z":"73d9648e.a2dc1c","wires":[["cf21867c.dd1fa8"]]},{"id":"8f85921d.34646","type":"http response","name":"","x":1035.5555419921875,"y":927.3333740234375,"z":"73d9648e.a2dc1c","wires":[]},{"id":"50962fe5.2cfba","type":"http in","name":"","url":"/select_iotdata","method":"get","x":145.66665649414062,"y":982.888916015625,"z":"73d9648e.a2dc1c","wires":[["efbd6756.c46848"]]},{"id":"2895917c.154a9e","type":"function","name":"Select * from information_schema","func":"msg.payload = \"select * from information_schema.columns where table_name = 'iotdata' ORDER BY ordinal_position;\";\n\nreturn msg;","outputs":1,"x":417,"y":865,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"5662c307.c9133c","type":"http in","name":"","url":"/tables_iotdata","method":"get","x":144,"y":865,"z":"73d9648e.a2dc1c","wires":[["2895917c.154a9e"]]},{"id":"54417508.cfc5ec","type":"comment","name":"Select Data","info":"","x":120,"y":909,"z":"73d9648e.a2dc1c","wires":[]},{"id":"40f9bd43.b58ed4","type":"http in","name":"","url":"/query","method":"get","x":117,"y":1731,"z":"278dcf49.90646","wires":[["a2658227.88909"]]},{"id":"5b6edae0.1e62d4","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":576,"y":1728,"z":"278dcf49.90646","wires":[["882c2ea3.7e5b1","fe7d642d.668f68"]]},{"id":"882c2ea3.7e5b1","type":"http response","name":"","x":745,"y":1772,"z":"278dcf49.90646","wires":[]},{"id":"fe7d642d.668f68","type":"debug","name":"","active":false,"console":"false","complete":"false","x":765,"y":1682,"z":"278dcf49.90646","wires":[]},{"id":"93ff8bc4.8fc028","type":"function","name":"Select count(*) from iotdata","func":"msg.payload = \"select count(*) from iotdata;\";\n\nreturn msg;","outputs":1,"x":387,"y":1058,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"823f27cd.b16328","type":"function","name":"Select Count(*) from sensor_data","func":"msg.payload = \"select count(*) from sensor_data;\";\n\nreturn msg;","outputs":1,"x":406.77777099609375,"y":1020.2777099609375,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"c80df030.82de9","type":"http in","name":"","url":"/select_sensors_c","method":"get","x":149.30555725097656,"y":1020.1666259765625,"z":"73d9648e.a2dc1c","wires":[["823f27cd.b16328"]]},{"id":"b80f181c.24cdf8","type":"http in","name":"","url":"/select_iotdata_c","method":"get","x":146.41665649414062,"y":1058.388916015625,"z":"73d9648e.a2dc1c","wires":[["93ff8bc4.8fc028"]]},{"id":"441ff69c.e10f78","type":"function","name":"Delete All Data From Table","func":"msg.payload = \"delete from iotdata;\";\n\nreturn msg;","outputs":1,"x":395,"y":1389,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"f178362e.a02128","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":143,"y":1388.5,"z":"73d9648e.a2dc1c","wires":[["441ff69c.e10f78"]]},{"id":"d44c3fca.2a99e","type":"inject","name":"","topic":"","payload":"select version();","payloadType":"string","repeat":"","crontab":"","once":false,"x":167,"y":1437,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"618db2fd.9af7dc","type":"inject","name":"select count(*) from sensors;","topic":"","payload":"select count(*) from sensor_data;","payloadType":"string","repeat":"","crontab":"","once":false,"x":206,"y":1476,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"3f4eb0c.aa5be5","type":"inject","name":"select * from sensors;","topic":"","payload":"select * from sensor_data;","payloadType":"string","repeat":"","crontab":"","once":false,"x":184,"y":1515,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"3ac72ab3.1363e6","type":"inject","name":"create table sensor_data","topic":"","payload":"create table sensor_data (sensorname varchar(30) primary key, location varchar(30), room varchar(30), date varchar(20), comment varchar(100));","payloadType":"string","repeat":"","crontab":"","once":false,"x":192,"y":1553,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"5dfc7dac.0cec94","type":"inject","name":"insert data to sensor_data","topic":"","payload":"insert into sensor_data(sensorname, room, location, date, comment) values('Sensor8','サーバルームH','ストレージラック3','2017-07-18','Ti SensorTAG使用、電池新品投入');","payloadType":"string","repeat":"","crontab":"","once":false,"x":196,"y":1592,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"2db55b5.12cb6a4","type":"inject","name":"drop table sensor_data;","topic":"","payload":"drop table sensor_data;","payloadType":"string","repeat":"","crontab":"","once":false,"x":189.44445037841797,"y":1629.999942779541,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"539f56a0.44c378","type":"template","name":"Make SQL","field":"payload","template":"select * from iotdata where sensorname = '{{sensorname}}';","x":408,"y":1729,"z":"278dcf49.90646","wires":[["5b6edae0.1e62d4"]]},{"id":"a2658227.88909","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nreturn msg;","outputs":1,"x":268,"y":1818,"z":"278dcf49.90646","wires":[["539f56a0.44c378"]]},{"id":"612459da.207898","type":"inject","name":"create table iotdata","topic":"","payload":"create table iotdata (sensorname varchar(30), date varchar(20), time varchar(20), timestamp timestamp, temperature real, humidity real);","payloadType":"string","repeat":"","crontab":"","once":false,"x":181.44445037841797,"y":1713.5555725097656,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"81b75d7b.0bcdb","type":"inject","name":"drop table iotdata;","topic":"","payload":"drop table iotdata;","payloadType":"string","repeat":"","crontab":"","once":false,"x":176.11111450195312,"y":1674.2221698760986,"z":"73d9648e.a2dc1c","wires":[["f3196a7c.3b7588"]]},{"id":"76c71b4d.6056f4","type":"http in","name":"","url":"/api1/v1/sensor_data/all","method":"get","x":169.66665649414062,"y":98.88887786865234,"z":"55959749.824718","wires":[["3a72fe4.56d5102"]]},{"id":"3a72fe4.56d5102","type":"function","name":"Select * from sensor_data","func":"msg.payload = \"select * from sensor_data order by sensorname;\";\n\nreturn msg;","outputs":1,"x":437.77783203125,"y":99.99993896484375,"z":"55959749.824718","wires":[["1bf68679.d755ba"]]},{"id":"64d3fc31.41c0e4","type":"function","name":"Message Headers","func":"msg.headers = {\n \"Access-Control-Allow-Origin\":\"*\",\n \"Access-Control-Allow-Method\":\"GET,POST,PUT,DELETE,OPTIONS\",\n \"Access-Control-Allow-Headers\":\"Origin, X-Requested-With, Content-Type, Accept\"\n}\nreturn msg;","outputs":1,"x":873.3334121704102,"y":100.00000858306885,"z":"55959749.824718","wires":[["3a518ced.d24514","c029adc2.c3881"]]},{"id":"1bf68679.d755ba","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":697.7778549194336,"y":100.00000858306885,"z":"55959749.824718","wires":[["64d3fc31.41c0e4"]]},{"id":"3a518ced.d24514","type":"debug","name":"","active":true,"console":"false","complete":"false","x":1054.444580078125,"y":55.555524826049805,"z":"55959749.824718","wires":[]},{"id":"c029adc2.c3881","type":"http response","name":"","x":1040.7779273986816,"y":136.25007247924805,"z":"55959749.824718","wires":[]},{"id":"8d3403fa.196c","type":"http in","name":"","url":"/api1/v1/sensor_data/list","method":"get","x":170.11109924316406,"y":201,"z":"55959749.824718","wires":[["981a466a.822628"]]},{"id":"981a466a.822628","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nmsg.location = msg.payload.location;\nmsg.room = msg.payload.room;\nmsg.date = msg.payload.date;\nmsg.comment = msg.payload.comment;\nreturn msg;","outputs":1,"x":494.6666564941406,"y":201.11109924316406,"z":"55959749.824718","wires":[["96da1118.89673"]]},{"id":"96da1118.89673","type":"template","name":"Make SQL","field":"payload","template":"select * from sensor_data where sensorname = '{{sensorname}}' or location = '{{location}}' or room = '{{room}}' or date = '{{date}}';","x":706.111083984375,"y":200.99996948242188,"z":"55959749.824718","wires":[["1bf68679.d755ba"]]},{"id":"b3badee5.ab098","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nmsg.location = msg.payload.location;\nmsg.room = msg.payload.room;\nmsg.date = msg.payload.date;\nmsg.comment = msg.payload.comment;\n\nreturn msg;","outputs":1,"x":496.888916015625,"y":289.77777099609375,"z":"55959749.824718","wires":[["e518c26c.8ffbb"]]},{"id":"e518c26c.8ffbb","type":"template","name":"Make SQL","field":"payload","template":"insert into sensor_data(sensorname, location, room, date, comment) values('{{sensorname}}','{{location}}','{{room}}','{{date}}','{{comment}}');","x":710.3333129882812,"y":289.6666259765625,"z":"55959749.824718","wires":[["1bf68679.d755ba"]]},{"id":"725a5c74.2346a4","type":"http in","name":"","url":"/api1/v1/sensor_data/add","method":"get","x":175.6666717529297,"y":288.6666564941406,"z":"55959749.824718","wires":[["b3badee5.ab098"]]},{"id":"82f53a58.cb8628","type":"debug","name":"","active":false,"console":"false","complete":"false","x":753,"y":581,"z":"278dcf49.90646","wires":[]},{"id":"9f4170dd.48695","type":"http in","name":"","url":"/api1/v1/sensor_data/del","method":"get","x":173,"y":378,"z":"55959749.824718","wires":[["b3347056.e666"]]},{"id":"b3347056.e666","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\n\nreturn msg;","outputs":1,"x":499,"y":378,"z":"55959749.824718","wires":[["57cce880.f53a98"]]},{"id":"57cce880.f53a98","type":"template","name":"Make SQL","field":"payload","template":"delete from sensor_data where sensorname = '{{sensorname}}';","x":714,"y":378,"z":"55959749.824718","wires":[["1bf68679.d755ba"]]},{"id":"15af4ee2.747e81","type":"http in","name":"","url":"/api1/v1/sensor_data/update","method":"get","x":187,"y":460,"z":"55959749.824718","wires":[["6866d11f.5d296"]]},{"id":"6866d11f.5d296","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nmsg.location = msg.payload.location;\nmsg.room = msg.payload.room;\nmsg.date = msg.payload.date;\nmsg.comment = msg.payload.comment;\n\nreturn msg;","outputs":1,"x":500,"y":461,"z":"55959749.824718","wires":[["5a38933c.caecac"]]},{"id":"5a38933c.caecac","type":"template","name":"Make SQL","field":"payload","template":"update sensor_data set comment = '{{comment}}' where sensorname = '{{sensorname}}'; ","x":713.4443969726562,"y":460.88885498046875,"z":"55959749.824718","wires":[["1bf68679.d755ba"]]},{"id":"fae363de.d0b54","type":"comment","name":"Select * From Sensor_data","info":"","x":163,"y":61,"z":"55959749.824718","wires":[]},{"id":"442c3ea2.6d0c9","type":"comment","name":"Select * From Sensor_data where XXX","info":"","x":199,"y":165,"z":"55959749.824718","wires":[]},{"id":"caf8a4e.37e5358","type":"comment","name":"Insert into sensor_data","info":"","x":151,"y":253,"z":"55959749.824718","wires":[]},{"id":"6da10b33.c27614","type":"comment","name":"Delete from sensor_data","info":"","x":157,"y":341,"z":"55959749.824718","wires":[]},{"id":"7f28f7bc.64a7c8","type":"comment","name":"Update sensor_data","info":"","x":144,"y":424,"z":"55959749.824718","wires":[]},{"id":"7079c14.ac5de4","type":"http in","name":"","url":"/sensor_info","method":"get","x":140,"y":108,"z":"4facf94.2422908","wires":[["73bfe259.5f069c"]]},{"id":"73bfe259.5f069c","type":"template","name":"HTML & Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n<h1>センサー管理メニュー</h1>\n<br><br>\n\n<p>■ 設置センサー 一覧 ■</p>\n\n<br>\n<div id=\"example-table\" style=\"width: 60%;\"></div>\n<br>\n<form>\n<input type=\"button\"  value=\"センサー一覧更新\" onclick=\"koshin()\">\n</form>\n</br>\n\n<!--\n<p>■ センサー 検索 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/list\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"date\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"検索\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー検索画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー検索\" onclick=\"winOpen1()\">\n</form>\n<br>\n\n<!--\n<p>■ センサー 追加 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/add\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"date\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"追加\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー追加画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー追加\" onclick=\"winOpen2()\">\n</form>\n<br>\n\n<!--\n<p>■ センサー 情報更新 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/update\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"更新\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー情報更新画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー情報更新\" onclick=\"winOpen3()\">\n</form>\n<br>\n\n<!--\n<p>■ センサー 削除 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/del\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"削除\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー削除画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー削除\" onclick=\"winOpen4()\">\n</form>\n<br>\n\n<!-- ブラウザ前画面に戻る、更新ボタン -->\n<form>\n<input type=\"button\"  value=\"戻る\" onclick=\"modoru()\">\n<input type=\"button\"  value=\"更新\" onclick=\"koshin()\">\n</form>\n\n<script>\n\nfunction modoru(){\n  history.back();\n}\n\nfunction koshin(){\n  location.reload();\n}\n\nfunction winOpen1(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/search_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\nfunction winOpen2(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/add_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\nfunction winOpen3(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/update_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\nfunction winOpen4(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/delete_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\n//koshin();\ndatetimeweek();\n\n$(\"#example-table\").tabulator({\n\tcolumns:[\n\t\t{title:\"SensorName\", field:\"sensorname\", sortable:true, width:100},\n\t\t{title:\"Room\", field:\"room\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Location\", field:\"location\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Registration Date\", field:\"date\", sortable:true, width:150},\n\t\t{title:\"Comment\", field:\"comment\", sortable:false, width:500},\n\t],\n});\n\n$(\"#example-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/api1/v1/sensor_data/all\");\n\n$(window).resize(function(){\n\t$(\"#example-table\").tabulator(\"redraw\");\n});\n\n</script>\n\n</body>\n</html>","x":360,"y":108,"z":"4facf94.2422908","wires":[["b3a98eab.7296b"]]},{"id":"b3a98eab.7296b","type":"http response","name":"","x":651,"y":109,"z":"4facf94.2422908","wires":[]},{"id":"40e27ffa.d0bb7","type":"comment","name":"センサー情報管理","info":"","x":142,"y":69,"z":"4facf94.2422908","wires":[]},{"id":"d2ff5484.7d6dc8","type":"http in","name":"","url":"/search_sensor","method":"get","x":152,"y":228,"z":"4facf94.2422908","wires":[["b6e5b9a8.da4728"]]},{"id":"b6e5b9a8.da4728","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>Sensor Search</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>センサー検索</h1>\n<br><br>\n<form action=\"/api1/v1/sensor_data/list\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"date\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"検索\" /></p>\n</form>\n<br>\n\n<br>\n<div id=\"search-table\" style=\"width: 100%;\"></div>\n<br>\n\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n<script>\n\n$(\"#search-table\").tabulator({\n\tcolumns:[\n\t\t{title:\"SensorName\", field:\"sensorname\", sortable:true, width:100},\n\t\t{title:\"Room\", field:\"room\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Location\", field:\"location\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Registration Date\", field:\"date\", sortable:true, width:150},\n\t\t{title:\"Comment\", field:\"comment\", sortable:false, width:500},\n\t],\n});\n\n$(\"#search-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/api1/v1/sensor_data/list?\");\n\n$(window).resize(function(){\n\t$(\"#search-table\").tabulator(\"redraw\");\n});\n\n</script>\n\n\n</body>\n</html>","x":362,"y":228,"z":"4facf94.2422908","wires":[["b3a98eab.7296b"]]},{"id":"c87b5483.ef2848","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>■ センサー追加 ■</h1>\n<br>\n<form action=\"/api1/v1/sensor_data/add\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"date\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"追加\" /></p>\n</form>\n\n<br>\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n</body>\n</html>","x":364,"y":306,"z":"4facf94.2422908","wires":[["b3a98eab.7296b"]]},{"id":"622e0261.b13c0c","type":"http in","name":"","url":"/add_sensor","method":"get","x":145,"y":305,"z":"4facf94.2422908","wires":[["c87b5483.ef2848"]]},{"id":"710d4a3.9fd36b4","type":"http in","name":"","url":"/update_sensor","method":"get","x":156,"y":380,"z":"4facf94.2422908","wires":[["b19c7ba0.7a9e18"]]},{"id":"b19c7ba0.7a9e18","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>■ センサー 情報更新 ■</h1>\n<br>\n<form action=\"/api1/v1/sensor_data/update\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"更新\" /></p>\n</form>\n\n<br>\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n</body>\n</html>","x":363,"y":375,"z":"4facf94.2422908","wires":[["b3a98eab.7296b"]]},{"id":"761dff4e.69cf3","type":"http in","name":"","url":"/delete_sensor","method":"get","x":153,"y":452,"z":"4facf94.2422908","wires":[["1e4e5b4b.9ea425"]]},{"id":"1e4e5b4b.9ea425","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>■ センサー 削除 ■</h1>\n<br>\n<form action=\"/api1/v1/sensor_data/del\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"削除\" /></p>\n</form>\n\n<br>\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n</body>\n</html>","x":368,"y":449,"z":"4facf94.2422908","wires":[["b3a98eab.7296b"]]},{"id":"211d2f0f.bdd9","type":"mqtt in","name":"Sensor-SD001","topic":"testcode2/v1/ITP314-001/DTC/SD001","broker":"11917135.5de19f","x":107,"y":486,"z":"278dcf49.90646","wires":[["6faf761b.7c99a8"]]},{"id":"268e0240.ce904e","type":"mqtt in","name":"Sensor-SD002","topic":"testcode2/v1/ITP314-001/DTC/SD002","broker":"11917135.5de19f","x":106,"y":533,"z":"278dcf49.90646","wires":[["6faf761b.7c99a8"]]},{"id":"467f1a7f.b5c034","type":"mqtt in","name":"Sensor-SD003","topic":"testcode2/v1/ITP314-001/DTC/SD003","broker":"11917135.5de19f","x":107,"y":582,"z":"278dcf49.90646","wires":[["6faf761b.7c99a8"]]},{"id":"9955e70e.169988","type":"mqtt in","name":"Sensor-SD004","topic":"testcode2/v1/ITP314-001/DTC/SD004","broker":"11917135.5de19f","x":106,"y":628,"z":"278dcf49.90646","wires":[["6faf761b.7c99a8"]]},{"id":"3159fff9.59a28","type":"mqtt out","name":"Sensor-SD001","topic":"testcode2/v1/ITP314-001/DTC/SD001","qos":"1","retain":"true","broker":"11917135.5de19f","x":786,"y":144,"z":"278dcf49.90646","wires":[]},{"id":"b271d1d1.fc546","type":"mqtt out","name":"Sensor-SD002","topic":"testcode2/v1/ITP314-001/DTC/SD002","qos":"1","retain":"true","broker":"11917135.5de19f","x":787,"y":191,"z":"278dcf49.90646","wires":[]},{"id":"b46ba28e.7d199","type":"mqtt out","name":"Sensor-SD003","topic":"testcode2/v1/ITP314-001/DTC/SD003","qos":"1","retain":"true","broker":"11917135.5de19f","x":789,"y":239,"z":"278dcf49.90646","wires":[]},{"id":"5b441377.10be9c","type":"mqtt out","name":"Sensor-SD004","topic":"testcode2/v1/ITP314-001/DTC/SD004","qos":"1","retain":"true","broker":"11917135.5de19f","x":790,"y":287,"z":"278dcf49.90646","wires":[]},{"id":"abded07e.46bcf","type":"mqtt out","name":"Sensor-TEST2","topic":"testcode2/v1/ITP314-001/DTC/TEST2","qos":"1","retain":"true","broker":"11917135.5de19f","x":722,"y":338,"z":"278dcf49.90646","wires":[]},{"id":"20c3c3a6.c850ac","type":"mqtt in","name":"Sensor-TEST2","topic":"testcode2/v1/ITP314-001/DTC/TEST2","broker":"11917135.5de19f","x":113,"y":681,"z":"278dcf49.90646","wires":[["6faf761b.7c99a8"]]},{"id":"da025ea7.c36ca","type":"inject","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":107,"y":197,"z":"ee7ea2cd.8cde3","wires":[["4b4c7aa0.9d4054"]]},{"id":"4b4c7aa0.9d4054","type":"mqtt out","name":"test.mqtt","topic":"testcode2/v1/ITP314-001/DTC/SD001","qos":"0","retain":"true","broker":"735aba0d.4d1c04","x":276,"y":196,"z":"ee7ea2cd.8cde3","wires":[]},{"id":"b22612f4.601ff","type":"mqtt in","name":"test.mqtt.sub","topic":"testcode2/v1/ITP314-001/DTC/#","broker":"735aba0d.4d1c04","x":461,"y":195,"z":"ee7ea2cd.8cde3","wires":[["6f04ba5e.6e1fb4"]]},{"id":"6f04ba5e.6e1fb4","type":"debug","name":"","active":true,"console":"false","complete":"false","x":659,"y":199,"z":"ee7ea2cd.8cde3","wires":[]}]
