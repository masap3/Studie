[{"type":"tab","id":"7d35b8bb.f4f518","label":"Sheet 1"},{"type":"tab","id":"e025d07e.1b656","label":"Other Sample"},{"type":"tab","id":"7bf5fc41.093b64","label":"K5 Iot Sample1"},{"type":"tab","id":"222012c.693f9ee","label":"Postgres API"},{"type":"tab","id":"54fc7024.6ad96","label":"Sensor Manage Sample"},{"id":"5fbac071.4b08d","type":"websocket-listener","path":"/ws/sensor1","wholemsg":"false"},{"id":"11917135.5de19f","type":"mqtt-broker","broker":"api.trial2.iot.jp.fujitsu.com","port":"1883","clientid":""},{"id":"a7949bb6.944e38","type":"websocket-listener","path":"/ws/sensor2","wholemsg":"false"},{"id":"8fdc7071.ca817","type":"websocket-listener","path":"/ws/sensor","wholemsg":"false"},{"id":"437ce790.863708","type":"websocket-listener","path":"/ws/sensor3","wholemsg":"false"},{"id":"f45a52fa.a21f","type":"websocket-listener","path":"/ws/sensor4","wholemsg":"false"},{"id":"435211f1.bcadf","type":"websocket-listener","path":"/ws/rtchart","wholemsg":"false"},{"id":"a7aa3c6e.2da45","type":"ui_tab","name":"Temperature Status","icon":"dashboard","order":"1"},{"id":"85520cfd.6c5a3","type":"ui_tab","name":"Temperature Chart Graph 1 Hour","icon":"dashboard","order":"1"},{"id":"aecdcf58.fb5c9","type":"ui_tab","name":"Humidity Status","icon":"dashboard","order":"1"},{"id":"9614aa63.ea9888","type":"ui_tab","name":"Humidity Chart Graph 1 Hour","icon":"dashboard","order":"1"},{"id":"a26c4963.778498","type":"ui_tab","name":"Humidity Chart Graph 12 Hours","icon":"dashboard","order":"1"},{"id":"b2251b3a.e88bc8","type":"ui_tab","name":"Humidity Chart Graph 1 Week","icon":"dashboard","order":"1"},{"id":"a09df126.e15a5","type":"ui_tab","name":"Temperature Chart Graph 12 Hours","icon":"dashboard","order":"1"},{"id":"3d5dc16c.f5300e","type":"ui_tab","name":"Temperature Chart Graph 1 Week","icon":"dashboard","order":"1"},{"id":"1cdc5509.3fb37b","type":"sqldbsdatabase","host":"ArFMyqjbImh-uJQyrqLgDc4CMHlxlGR-pT5l-284NIxXNiiOx-4290000.database-jp-east-1.internal.cloud.global.fujitsu.com","port":"26500","db":"clqa9mwl","dialect":"postgres"},{"id":"54192100.1d709","type":"websocket-listener","path":"/ws/sensor5","wholemsg":"false"},{"id":"5945612.f2a34a","type":"websocket-listener","path":"/ws/sensor6","wholemsg":"false"},{"id":"13fa2ec7.0e6081","type":"websocket-listener","path":"/ws/sensor7","wholemsg":"false"},{"id":"7bf18ae5.ceac64","type":"websocket-listener","path":"/ws/sensor8","wholemsg":"false"},{"id":"b88098e5.2edd18","type":"postgresdb","hostname":"ArFMyqjbImh-uJQyrqLgDc4CMHlxlGR-pT5l-284NIxXNiiOx-4290000.database-jp-east-1.internal.cloud.global.fujitsu.com","port":"26500","db":"clqa9mwl","ssl":false},{"id":"168f2030.e970e","type":"postgresdb","hostname":"localhost","port":"5432","db":"postgres"},{"id":"735aba0d.4d1c04","type":"mqtt-broker","broker":"test.mosquitto.org","port":"1883","clientid":""},{"id":"bf6e252b.63b8c8","type":"ui_tab","name":"DTC Demo","icon":"dashboard","order":"1"},{"id":"67fc5032.b2c19","type":"inject","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":117,"y":85,"z":"7d35b8bb.f4f518","wires":[["2d5c69b8.4e4686"]]},{"id":"2d5c69b8.4e4686","type":"debug","name":"","active":false,"console":"false","complete":"false","x":525,"y":81,"z":"7d35b8bb.f4f518","wires":[]},{"id":"6fb52769.d8f758","type":"http in","name":"","url":"/Tabulator","method":"get","x":208,"y":122,"z":"e025d07e.1b656","wires":[["7344435a.8472ec"]]},{"id":"7344435a.8472ec","type":"template","name":"Script","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link href=\"https://cdnjs.cloudflare.com/ajax/libs/tabulator/2.11.0/tabulator.min.css\" rel=\"stylesheet\">\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://d3js.org/d3.v4.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/tabulator/2.11.0/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.23.0/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment-with-locales.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.13/moment-timezone-with-data.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n\n<!--\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/d3.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery-ui.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery.radios-to-slider.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/tabulator.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/jquery.fancytree-all.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/tauCharts.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/underscore-min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/moment-with-locales.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/moment-timezone-with-data.js\"></script>\n\t<link href=\"http://localhost:81/stylesheets/themes/semantic-ui/tabulator_semantic-ui.css\" rel=\"stylesheet\">\n\t<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/tauCharts/1.2.1/tauCharts.min.js\"></script>\n\t<link href=\"https://cdnjs.cloudflare.com/ajax/libs/tauCharts/1.2.1/tauCharts.min.css\" rel=\"stylesheet\">\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://localhost:81/javascripts/date-time-week.js\"></script>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost:81/stylesheets/style.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"http://localhost:81/stylesheets/style_20170523.css\">\n-->\n\n</head>\n\n<p><span style = 'color:blue; font-size:140%; font-weight:bold;'>-----< Tabulator を使用して表を作成 >-----</span></p>\n<br>\n\n<p><span style = 'color:red; font-size:120%; font-weight:bold;'>環境センサー稼働状況一覧</span></p>\n<input type=\"button\" value=\"更新\" onclick=\"location.reload();\" /> \n\n<br>\n<div id=\"example-table\"></div>\n<br/>\n\n<p><span style = 'color:red; font-size:120%; font-weight:bold;'>ラック扉開閉状況一覧</span></p>\n<input type=\"button\" value=\"更新\" onclick=\"location.reload();\" /> \n\n<br>\n<div id=\"door-table\"></div>\n<br/>\n\n<script>\n\nkoshin();\ndatetimeweek();\n\n//trigger download of data.csv file\n$(\"#download-csv\").click(function(){\n\t$(\"#example-table\").tabulator(\"download\", \"csv\", \"data.csv\");\n});\n\n//trigger download of data.json file\n$(\"#download-json\").click(function(){\n\t$(\"#example-table\").tabulator(\"download\", \"json\", \"data.json\");\n});\n\n$(\"#example-table\").tabulator({\n\theight:\"640px\",\n\tdateFormat:\"yyyy/mm/dd\",\n\tfitColumns:true,\n//\tpagination:true,\n//\ttooltips:true,\n\tmovableRows:true,\n\tcolumns:[\n\t\t{title:\"Sensor Name\", field:\"name\", sortable:true, width:200, align:\"center\"},\n\t\t{title:\"Status\", field:\"doacheck\", sorter:\"boolean\", sortable:true, align:\"center\", formatter:\"tickCross\", width:100},\n\t\t{title:\"Place\", field:\"place\", sortable:true, sorter:\"number\", width:200, align:\"center\"},\n\t\t{title:\"Date\", field:\"date\", sortable:true, sorter:\"date\", width:150, align:\"center\"},\n\t\t{title:\"Time\", field:\"time\", sortable:false, width:150, align:\"center\"},\n\t\t{title:\"Ambient Temperature\", field:\"temp\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Object Temperature\", field:\"objectTemp\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Humidity\", field:\"humidity\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Barometer\", field:\"barometer\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"lux\", field:\"lux\", sortable:true, sorter:\"number\", align:\"center\", width:100},\n\t\t{title:\"Note\", field:\"note\", sortable:false, width:300, align:\"left\", editable:true},\n\t],\n});\n\n$(\"#example-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/data/data15.json\");\n\n\n$(\"#door-table\").tabulator({\n\theight:\"320px\",\n\tdateFormat:\"yyyy/mm/dd\",\n\tfitColumns:true,\n//\tpagination:true,\n//\ttooltips:true,\n\tmovableRows:true,\n\tcolumns:[\n\t\t{title:\"Rack Name\", field:\"place\", sortable:true, sorter:\"number\", width:200, align:\"center\"},\n\t\t{title:\"Door Status\", field:\"door_open\", sorter:\"boolean\", sortable:true, align:\"center\", formatter:\"tickCross\", width:150},\n\t\t{title:\"Date\", field:\"date\", sortable:true, sorter:\"date\", width:150, align:\"center\"},\n\t\t{title:\"Time\", field:\"time\", sortable:false, width:150, align:\"center\"},\n\t\t{title:\"Note\", field:\"note\", sortable:false, width:300, align:\"left\", editable:true},\n\t],\n});\n\n$(\"#door-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/data/data16.json\");\n\n\n\n\n</script>\n\n</body>\n</html>","x":400,"y":122,"z":"e025d07e.1b656","wires":[["794b56ca.b54078"]]},{"id":"794b56ca.b54078","type":"http response","name":"","x":631,"y":122,"z":"e025d07e.1b656","wires":[]},{"id":"1018978f.282c08","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":99,"y":65,"z":"7bf5fc41.093b64","wires":[["380b8d8.5f2f572","1ae08445.80bdfc","fe01d223.2042a","1b9b5f7e.f7e321","88e19aa2.1f5718","34711e71.970b82","9a5499e3.0c7e78","57f609fb.b4fdb8","f057dcc4.01705","b05feeac.b5386"]]},{"id":"380b8d8.5f2f572","type":"function","name":"Create dummy rundom data for Sensor1","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor1\";\n\n// Object of place\nvar location1 = \"ServerRack1\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":378,"y":66,"z":"7bf5fc41.093b64","wires":[["7567992a.1a68b8"]]},{"id":"1ae08445.80bdfc","type":"function","name":"Create dummy rundom data for Sensor2","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor2\";\n\n// Object of place\nvar location1 = \"ServerRack2\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":378,"y":102,"z":"7bf5fc41.093b64","wires":[["4de0990c.5e1e58"]]},{"id":"fe01d223.2042a","type":"function","name":"Create dummy rundom data for Sensor3","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor3\";\n\n// Object of place\nvar location1 = \"ServerRack3\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":378.75,"y":138,"z":"7bf5fc41.093b64","wires":[["19c21e82.368bb1"]]},{"id":"1b9b5f7e.f7e321","type":"function","name":"Create dummy rundom data for Sensor4","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor4\";\n\n// Object of place\nvar location1 = \"ServerRack4\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":379.75,"y":174,"z":"7bf5fc41.093b64","wires":[["d25d8e17.d58e8"]]},{"id":"293fd7e8.806578","type":"template","name":"Authrization Header","field":"headers.Authorization","template":"Bearer testcode2","x":1068.392837524414,"y":550.8928909301758,"z":"7bf5fc41.093b64","wires":[["3ceab95f.d16786"]]},{"id":"3ceab95f.d16786","type":"http request","name":"REST API Put data","method":"PUT","ret":"txt","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2","x":1286.8928451538086,"y":550.8928918838501,"z":"7bf5fc41.093b64","wires":[["ad8862c4.902cf"]]},{"id":"ad8862c4.902cf","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1378.3928451538086,"y":614.3928909301758,"z":"7bf5fc41.093b64","wires":[]},{"id":"bc148cab.c89d1","type":"comment","name":"Send data to MQTT Out(Publish)","info":"","x":891,"y":26,"z":"7bf5fc41.093b64","wires":[]},{"id":"8e393eff.5798c","type":"comment","name":"Send data to REST API Put","info":"","x":1087.392837524414,"y":514.8928909301758,"z":"7bf5fc41.093b64","wires":[]},{"id":"b7bbd7e6.c5dca8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":818.3928375244141,"y":589.8928909301758,"z":"7bf5fc41.093b64","wires":[]},{"id":"cdd37dd2.1cd3a","type":"json","name":"","x":534.392822265625,"y":646.1428833007812,"z":"7bf5fc41.093b64","wires":[["b7bbd7e6.c5dca8","1b945a82.e90215","80878096.6a8db","cd343c30.3f824"]]},{"id":"1d1ba432.732e1c","type":"comment","name":"Subscribe from MQTT In","info":"","x":126.392822265625,"y":551.1428833007812,"z":"7bf5fc41.093b64","wires":[]},{"id":"80878096.6a8db","type":"csv","name":"JSON to CSV output","sep":",","hdrin":"","hdrout":false,"multi":"one","ret":"\\n","temp":"date,time,sensorname,temperature,humidity","x":840.3928375244141,"y":630.8928909301758,"z":"7bf5fc41.093b64","wires":[["657123e7.402d5c","3d90d4aa.a5ba4c"]]},{"id":"657123e7.402d5c","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1057.392837524414,"y":651.8928909301758,"z":"7bf5fc41.093b64","wires":[]},{"id":"3d90d4aa.a5ba4c","type":"file","name":"Write to CSV File","filename":"public/data/test_20170707.csv","appendNewline":false,"overwriteFile":"false","x":1071.392837524414,"y":610.8928909301758,"z":"7bf5fc41.093b64","wires":[]},{"id":"1b945a82.e90215","type":"switch","name":"Separate by SensorName","property":"payload.sensorname","rules":[{"t":"eq","v":"Sensor1"},{"t":"eq","v":"Sensor2"},{"t":"eq","v":"Sensor3"},{"t":"eq","v":"Sensor4"},{"t":"eq","v":"Sensor5"},{"t":"eq","v":"Sensor6"},{"t":"eq","v":"Sensor7"},{"t":"eq","v":"Sensor8"},{"t":"eq","v":"Sensor9"},{"t":"eq","v":"Sensor10"}],"checkall":"true","outputs":10,"x":200.1071319580078,"y":1010.7142610549927,"z":"7bf5fc41.093b64","wires":[["ffe9d83b.889478","7f3e575a.b0a938","3f3a7574.8cc4ca"],["782a9749.1f7018","997c8b1.279ec78","238bb08f.0d4e4"],["65f46250.d053dc","5069a074.985ab","2aebef70.6cf3"],["31902f65.1fd41","635e3a3c.d577b4","35bc3659.df338a"],["33e56d3b.c54982","3a2871f6.03f08e","37364e34.be9982"],["a6e08dde.91a7c","5df30fc7.bac19","cc8cadcc.cc065"],["6709683c.9b01e8","ba7206d4.4855b8","48b4e365.68c4ac"],["325ba93c.861ba6","14327b69.e2faa5","93161aae.0db1d8"],["78c1534a.22d68c","218335e1.557bfa"],["ad3e05c9.373928","56b8f546.89edbc"]]},{"id":"7f3e575a.b0a938","type":"function","name":"Sensor1 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":749.6586990356445,"y":947.3094606399536,"z":"7bf5fc41.093b64","wires":[["a6e56353.11484","e4e92b8d.8853b8","56916526.d47e8c","252c4e5.8e585b2","4baa71e3.60a3e","46bc7362.1dfd1c"]]},{"id":"997c8b1.279ec78","type":"function","name":"Sensor2 Temp Payload","func":"return {payload:msg.payload.temperature};\n","outputs":1,"x":748.1309471130371,"y":987.0595636367798,"z":"7bf5fc41.093b64","wires":[["2f684cfc.516fb4","95525522.023438","52232860.4dcf28","5401cffc.f6f0c"]]},{"id":"5069a074.985ab","type":"function","name":"Sensor3 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":749.8253860473633,"y":1027.4762086868286,"z":"7bf5fc41.093b64","wires":[["a31ad3f6.a4626","fd85c7fb.22cb28","673e7a08.9f65b4","9a9a75ed.aed248"]]},{"id":"635e3a3c.d577b4","type":"function","name":"Sensor4 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":749.5197830200195,"y":1068.9484376907349,"z":"7bf5fc41.093b64","wires":[["18cd92ae.ad93cd","842839b1.e24eb8","61a7c55e.72bd5c","706a6f7a.13b48"]]},{"id":"859d20c.54224e","type":"comment","name":"Make dummy data to Publish","info":"","x":339,"y":28,"z":"7bf5fc41.093b64","wires":[]},{"id":"eb01d173.0604e","type":"websocket out","name":"/ws/sensor1","server":"5fbac071.4b08d","client":"","x":296.82141876220703,"y":1362.2382011413574,"z":"7bf5fc41.093b64","wires":[]},{"id":"ffe9d83b.889478","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":129.26587677001953,"y":1361.238094329834,"z":"7bf5fc41.093b64","wires":[["eb01d173.0604e"]]},{"id":"782a9749.1f7018","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":129.1547622680664,"y":1401.6825885772705,"z":"7bf5fc41.093b64","wires":[["f2e5f62b.c1d878"]]},{"id":"65f46250.d053dc","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":131.1547622680664,"y":1443.6825885772705,"z":"7bf5fc41.093b64","wires":[["a7ebb902.f7e8b8"]]},{"id":"31902f65.1fd41","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":132.04364776611328,"y":1483.4603691101074,"z":"7bf5fc41.093b64","wires":[["d31d7c8b.5ca32"]]},{"id":"f2e5f62b.c1d878","type":"websocket out","name":"/ws/sensor2","server":"a7949bb6.944e38","client":"","x":296.9325485229492,"y":1402.5714950561523,"z":"7bf5fc41.093b64","wires":[]},{"id":"42118305.68e3cc","type":"comment","name":"HTTP URL","info":"","x":112.89289093017578,"y":1838.928614616394,"z":"7bf5fc41.093b64","wires":[]},{"id":"1fae055e.ccb18b","type":"http in","name":"","url":"/sensor","method":"get","x":117.89289093017578,"y":1878.178635597229,"z":"7bf5fc41.093b64","wires":[["db2ff9f8.41c3b8"]]},{"id":"db2ff9f8.41c3b8","type":"template","name":"All Sensor Visualize","field":"payload","template":"<!DOCTYPE html>\n<html>\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>Sensor Data Visualization</title>\n\t<link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css\" rel=\"stylesheet\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<script src=\"https://code.jquery.com/jquery-3.2.1.slim.min.js\" integrity=\"sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"//www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script>\n\t<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://oss.maxcdn.com/respond/1.4.2/respond.min.js\"></script>\n\t<script type=\"text/javascript\">\n\n// Sensor1 JS Section\n\nvar wsUrl1 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor1';\n\tvar socket;\n\t\tvar temperatureData1, humidityData1;\n\t\tvar temperatureOptions1, humidityOptions1;\n\t\tvar temperatureChart1, humidityChart1;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart1);\n\t\tfunction drawChart1() {\n\n\t// Data for Sensor1 temperature chart\n\t\ttemperatureData1 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Seosor1', 0],\n\t\t]);\n\n\t// Data for Sensor1 humidity chart\n\t\thumidityData1 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor1', 0]\n\t\t]);\n\n\t// Option for Sensor1 temperature chart\n\t\ttemperatureOptions1 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor1 humidity chart\n\t\thumidityOptions1 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\ttemperatureChart1 = new google.visualization.Gauge(document.getElementById('temperatureChart1'));\n\thumidityChart1 = new google.visualization.Gauge(document.getElementById('humidityChart1'));\n\n\ttemperatureChart1.draw(temperatureData1, temperatureOptions1);\n\thumidityChart1.draw(humidityData1, humidityOptions1);\n\n\t};\n\n// Sensor2 JS Section\n\nvar wsUrl2 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor2';\n\tvar socket;\n\t\tvar temperatureData2, humidityData2;\n\t\tvar temperatureOptions2, humidityOptions2;\n\t\tvar temperatureChart2, humidityChart2;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart2);\n\t\tfunction drawChart2() {\n\n\t// Data for Sensor2 temperature chart\n\ttemperatureData2 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor2', 0],\n\t\t]);\n\n\t// Data for Sensor2 humidity chart\n\thumidityData2 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor2', 0]\n\t\t]);\n\n\t// Option for Sensor2 temperature chart\n\ttemperatureOptions2 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor2 humidity chart\n\thumidityOptions2 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart2 = new google.visualization.Gauge(document.getElementById('temperatureChart2'));\n\thumidityChart2 = new google.visualization.Gauge(document.getElementById('humidityChart2'));\n\n\ttemperatureChart2.draw(temperatureData2, temperatureOptions2);\n\thumidityChart2.draw(humidityData2, humidityOptions2);\n\n\t};\n\n// Sensor3 JS Section\n\nvar wsUrl3 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor3';\n\tvar socket;\n\t\tvar temperatureData3, humidityData3;\n\t\tvar temperatureOptions3, humidityOptions3;\n\t\tvar temperatureChart3, humidityChart3;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart3);\n\t\tfunction drawChart3() {\n\n\t// Data for Sensor3 temperature chart\n\ttemperatureData3 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor3', 0],\n\t\t]);\n\n\t// Data for Sensor3 humidity chart\n\thumidityData3 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor3', 0]\n\t\t]);\n\n\t// Option for Sensor3 temperature chart\n\ttemperatureOptions3 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor3 humidity chart\n\thumidityOptions3 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart3 = new google.visualization.Gauge(document.getElementById('temperatureChart3'));\n\thumidityChart3 = new google.visualization.Gauge(document.getElementById('humidityChart3'));\n\n\ttemperatureChart3.draw(temperatureData3, temperatureOptions3);\n\thumidityChart3.draw(humidityData3, humidityOptions3);\n\n\t};\n\n// Sensor4 JS Section\n\nvar wsUrl4 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor4';\n\tvar socket;\n\t\tvar temperatureData4, humidityData4;\n\t\tvar temperatureOptions4, humidityOptions4;\n\t\tvar temperatureChart4, humidityChart4;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart4);\n\t\tfunction drawChart4() {\n\n\t// Data for Sensor4 temperature chart\n\ttemperatureData4 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor4', 0],\n\t\t]);\n\n\t// Data for Sensor4 humidity chart\n\thumidityData4 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor4', 0]\n\t\t]);\n\n\t// Option for Sensor4 temperature chart\n\ttemperatureOptions4 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor4 humidity chart\n\thumidityOptions4 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart4 = new google.visualization.Gauge(document.getElementById('temperatureChart4'));\n\thumidityChart4 = new google.visualization.Gauge(document.getElementById('humidityChart4'));\n\n\ttemperatureChart4.draw(temperatureData4, temperatureOptions4);\n\thumidityChart4.draw(humidityData4, humidityOptions4);\n\n\t};\n\n// Sensor5 JS Section\n\nvar wsUrl5 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor5';\n\tvar socket;\n\t\tvar temperatureData5, humidityData5;\n\t\tvar temperatureOptions5, humidityOptions5;\n\t\tvar temperatureChart5, humidityChart5;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart5);\n\t\tfunction drawChart5() {\n\n\t// Data for Sensor5 temperature chart\n\ttemperatureData5 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor5', 0],\n\t\t]);\n\n\t// Data for Sensor5 humidity chart\n\thumidityData5 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor5', 0]\n\t\t]);\n\n\t// Option for Sensor5 temperature chart\n\ttemperatureOptions5 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor5 humidity chart\n\thumidityOptions5 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart5 = new google.visualization.Gauge(document.getElementById('temperatureChart5'));\n\thumidityChart5 = new google.visualization.Gauge(document.getElementById('humidityChart5'));\n\n\ttemperatureChart5.draw(temperatureData5, temperatureOptions5);\n\thumidityChart5.draw(humidityData5, humidityOptions5);\n\n\t};\n\n// Sensor6 JS Section\n\nvar wsUrl6 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor6';\n\tvar socket;\n\t\tvar temperatureData6, humidityData6;\n\t\tvar temperatureOptions6, humidityOptions6;\n\t\tvar temperatureChart6, humidityChart6;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart6);\n\t\tfunction drawChart6() {\n\n\t// Data for Sensor6 temperature chart\n\ttemperatureData6 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor6', 0],\n\t\t]);\n\n\t// Data for Sensor6 humidity chart\n\thumidityData6 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor6', 0]\n\t\t]);\n\n\t// Option for Sensor6 temperature chart\n\ttemperatureOptions6 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor6 humidity chart\n\thumidityOptions6 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart6 = new google.visualization.Gauge(document.getElementById('temperatureChart6'));\n\thumidityChart6 = new google.visualization.Gauge(document.getElementById('humidityChart6'));\n\n\ttemperatureChart6.draw(temperatureData6, temperatureOptions6);\n\thumidityChart6.draw(humidityData6, humidityOptions6);\n\n\t};\n\n// Sensor7 JS Section\n\nvar wsUrl7 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor7';\n\tvar socket;\n\t\tvar temperatureData7, humidityData7;\n\t\tvar temperatureOptions7, humidityOptions7;\n\t\tvar temperatureChart7, humidityChart7;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart7);\n\t\tfunction drawChart7() {\n\n\t// Data for Sensor7 temperature chart\n\ttemperatureData7 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor7', 0],\n\t\t]);\n\n\t// Data for Sensor7 humidity chart\n\thumidityData7 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor7', 0]\n\t\t]);\n\n\t// Option for Sensor7 temperature chart\n\ttemperatureOptions7 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor7 humidity chart\n\thumidityOptions7 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart7 = new google.visualization.Gauge(document.getElementById('temperatureChart7'));\n\thumidityChart7 = new google.visualization.Gauge(document.getElementById('humidityChart7'));\n\n\ttemperatureChart7.draw(temperatureData7, temperatureOptions7);\n\thumidityChart7.draw(humidityData7, humidityOptions7);\n\n\t};\n\n// Sensor8 JS Section\n\nvar wsUrl8 = 'wss://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ws/sensor8';\n\tvar socket;\n\t\tvar temperatureData8, humidityData8;\n\t\tvar temperatureOptions8, humidityOptions8;\n\t\tvar temperatureChart8, humidityChart8;\n\n\t// Google Gauge\n\t\tgoogle.load(\"visualization\", \"1\", {packages:[\"gauge\"]});\n\t\tgoogle.setOnLoadCallback(drawChart8);\n\t\tfunction drawChart8() {\n\n\t// Data for Sensor8 temperature chart\n\ttemperatureData8 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor8', 0],\n\t\t]);\n\n\t// Data for Sensor8 humidity chart\n\thumidityData8 = google.visualization.arrayToDataTable([\n\t\t['Label', 'Value'],\n\t\t['Sensor8', 0]\n\t\t]);\n\n\t// Option for Sensor8 temperature chart\n\ttemperatureOptions8 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 20, max: 30,\n\t\tredFrom: 28, redTo: 30,\n\t\tgreenFrom: 20, greenTo: 25,\n\t\tyellowFrom:25, yellowTo: 28,\n\t\tminorTicks: 10\n\t\t};\n\n\t// Option for Sensor8 humidity chart\n\thumidityOptions8 = {\n\t\twidth: 200, height: 200,\n\t\tmin: 0, max: 100,\n\t\tredFrom: 75, redTo: 100,\n\t\tgreenFrom: 40, greenTo: 60,\n\t\tyellowFrom:60, yellowTo: 75,\n\t\tminorTicks: 10\n\t\t};\n\n\n\ttemperatureChart8 = new google.visualization.Gauge(document.getElementById('temperatureChart8'));\n\thumidityChart8 = new google.visualization.Gauge(document.getElementById('humidityChart8'));\n\n\ttemperatureChart8.draw(temperatureData8, temperatureOptions8);\n\thumidityChart8.draw(humidityData8, humidityOptions8);\n\n\t};\n\n// Sensor1 Websocket Connect and Close\n      \nfunction connect1() {\n\tsocket = new WebSocket(wsUrl1);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update temperature data\n\ttemperatureData1.setValue(0, 1, sensorData.temp);\n\n\t// Update humidity data\n\thumidityData1.setValue(0, 1, sensorData.humidity);\n\n\ttemperatureChart1.draw(temperatureData1, temperatureOptions1);\n\thumidityChart1.draw(humidityData1, humidityOptions1);\n\n\t};\n};\n      \nfunction disconnect1() {\n\tsocket.close();\n};\n\n// Sensor2 Websocket Connect and Close\n      \nfunction connect2() {\n\tsocket = new WebSocket(wsUrl2);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor2 temperature data\n\ttemperatureData2.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor2 humidity data\n\thumidityData2.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart2.draw(temperatureData2, temperatureOptions2);\n\thumidityChart2.draw(humidityData2, humidityOptions2);\n\n\t};\n};\n\nfunction disconnect2() {\n\tsocket.close();\n};\n\n// Sensor3 Websocket Connect and Close\n      \nfunction connect3() {\n\tsocket = new WebSocket(wsUrl3);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor3 temperature data\n\ttemperatureData3.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor3 humidity data\n\thumidityData3.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart3.draw(temperatureData3, temperatureOptions3);\n\thumidityChart3.draw(humidityData3, humidityOptions3);\n\n\t};\n};\n\nfunction disconnect3() {\n\tsocket.close();\n};\n\n// Sensor4 Websocket Connect and Close\n      \nfunction connect4() {\n\tsocket = new WebSocket(wsUrl4);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor4 temperature data\n\ttemperatureData4.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor4 humidity data\n\thumidityData4.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart4.draw(temperatureData4, temperatureOptions4);\n\thumidityChart4.draw(humidityData4, humidityOptions4);\n\n\t};\n};\n\nfunction disconnect4() {\n\tsocket.close();\n};\n\n// Sensor5 Websocket Connect and Close\n      \nfunction connect5() {\n\tsocket = new WebSocket(wsUrl5);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor5 temperature data\n\ttemperatureData5.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor5 humidity data\n\thumidityData5.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart5.draw(temperatureData5, temperatureOptions5);\n\thumidityChart5.draw(humidityData5, humidityOptions5);\n\n\t};\n};\n\nfunction disconnect5() {\n\tsocket.close();\n};\n\n// Sensor6 Websocket Connect and Close\n      \nfunction connect6() {\n\tsocket = new WebSocket(wsUrl6);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor6 temperature data\n\ttemperatureData6.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor6 humidity data\n\thumidityData6.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart6.draw(temperatureData6, temperatureOptions6);\n\thumidityChart6.draw(humidityData6, humidityOptions6);\n\n\t};\n};\n\nfunction disconnect6() {\n\tsocket.close();\n};\n\n// Sensor7 Websocket Connect and Close\n      \nfunction connect7() {\n\tsocket = new WebSocket(wsUrl7);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor7 temperature data\n\ttemperatureData7.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor7 humidity data\n\thumidityData7.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart7.draw(temperatureData7, temperatureOptions7);\n\thumidityChart7.draw(humidityData7, humidityOptions7);\n\n\t};\n};\n\nfunction disconnect7() {\n\tsocket.close();\n};\n\n// Sensor8 Websocket Connect and Close\n      \nfunction connect8() {\n\tsocket = new WebSocket(wsUrl8);\n\tsocket.onmessage = function(e) {\n\tvar sensorData = JSON.parse(e.data);\n\n\t// Update Sensor8 temperature data\n\ttemperatureData8.setValue(0, 1, sensorData.temp);\n\n\t// Update Sensor8 humidity data\n\thumidityData8.setValue(0, 1, sensorData.humidity);\n\n\n\ttemperatureChart8.draw(temperatureData8, temperatureOptions8);\n\thumidityChart8.draw(humidityData8, humidityOptions8);\n\n\t};\n};\n\nfunction disconnect8() {\n\tsocket.close();\n};\n\n</script>\n\n</head>\n\n<body>\n<div>\n<!-- <div class=\"container\"> --> \n\t<h1> K5 IoT Sample App <small>< Realtime Meter with Websocket ></small></h1>\n</div>  \n\n<br>\n<h3>■ Websocket 接続 ■</h3>\n<div>\n\t<br><button onclick=\"connect1()\">Connect Sensor1</button></br>\n\t<br><button onclick=\"connect2()\">Connect Sensor2</button></br>\n\t<br><button onclick=\"connect3()\">Connect Sensor3</button></br>\n\t<br><button onclick=\"connect4()\">Connect Sensor4</button></br>\n\t<br><button onclick=\"connect5()\">Connect Sensor5</button></br>\n\t<br><button onclick=\"connect6()\">Connect Sensor5</button></br>\n\t<br><button onclick=\"connect7()\">Connect Sensor7</button></br>\n\t<br><button onclick=\"connect8()\">Connect Sensor8</button></br>\n</div>\n</br>\n<h3>■ Websocket 切断 ■</h3>\n<div>\n\t<br><button onclick=\"disconnect1()\">Disconnect Sensor1</button></br>\n\t<br><button onclick=\"disconnect2()\">Disconnect Sensor2</button></br>\n\t<br><button onclick=\"disconnect3()\">Disconnect Sensor3</button></br>\n\t<br><button onclick=\"disconnect4()\">Disconnect Sensor4</button></br>\n\t<br><button onclick=\"disconnect5()\">Disconnect Sensor5</button></br>\n\t<br><button onclick=\"disconnect6()\">Disconnect Sensor6</button></br>\n\t<br><button onclick=\"disconnect7()\">Disconnect Sensor7</button></br>\n\t<br><button onclick=\"disconnect8()\">Disconnect Sensor8</button></br>\n</div>\n<br>\n<h1>■ Temperature ■</h1>\n<div>\n\t<div id=\"temperatureChart1\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart2\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart3\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart4\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart5\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart6\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart7\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"temperatureChart8\" style=\"width: 200px; height: 200px; float:left;\"></div>\n</div>\n<br><br><br><br><br><br><br><br><br><br><br><br><br>\n<h1>■ Humidity ■</h1>\n<div>\n\t<div id=\"humidityChart1\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart2\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart3\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart4\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart5\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart6\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart7\" style=\"width: 200px; height: 200px; float:left;\"></div>\n\t<div id=\"humidityChart8\" style=\"width: 200px; height: 200px; float:left;\"></div>\n</div>\n\n</body>\n</html>","x":325.8928909301758,"y":1878.178635597229,"z":"7bf5fc41.093b64","wires":[["fce76294.9ea39"]]},{"id":"fce76294.9ea39","type":"http response","name":"","x":517.8928909301758,"y":1878.178635597229,"z":"7bf5fc41.093b64","wires":[]},{"id":"a7ebb902.f7e8b8","type":"websocket out","name":"/ws/sensor3","server":"437ce790.863708","client":"","x":298.68248748779297,"y":1443.3215141296387,"z":"7bf5fc41.093b64","wires":[]},{"id":"d31d7c8b.5ca32","type":"websocket out","name":"/ws/sensor4","server":"f45a52fa.a21f","client":"","x":299.6825637817383,"y":1483.5714530944824,"z":"7bf5fc41.093b64","wires":[]},{"id":"cd343c30.3f824","type":"function","name":"Data Modify for DB Insert","func":"msg.payload = \"insert into iotdata(sensorname, date, time, timestamp, temperature, humidity) values('\" + msg.payload.sensorname + \"','\" + msg.payload.date + \"','\" + msg.payload.time + \"','\" + msg.payload.timestamp + \"','\" + msg.payload.temperature + \"','\" + msg.payload.humidity + \"');\";\n\nreturn msg;","outputs":1,"x":853.6428680419922,"y":703.3928909301758,"z":"7bf5fc41.093b64","wires":[["db1b8050.72e4e","d35e616b.4565d"]]},{"id":"192acf0d.035f91","type":"inject","name":"","topic":"","payload":"true","payloadType":"none","repeat":"","crontab":"","once":false,"x":172,"y":278,"z":"e025d07e.1b656","wires":[["8f47c03b.e9deb"]]},{"id":"f1509344.0515b","type":"debug","name":"","active":true,"console":"false","complete":"false","x":1012,"y":278,"z":"e025d07e.1b656","wires":[]},{"id":"5cf4c8eb.4669a8","type":"http request","name":"REST API GET","method":"GET","ret":"obj","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2/_past","x":702,"y":278,"z":"e025d07e.1b656","wires":[["f1509344.0515b","d07e0e7c.ad7ed"]]},{"id":"8f47c03b.e9deb","type":"template","name":"認証情報付与","field":"headers.Authorization","template":"Bearer testcode2","x":422,"y":278,"z":"e025d07e.1b656","wires":[["5cf4c8eb.4669a8"]]},{"id":"aa33652.6919f98","type":"http request","name":"データ追加 [REST API]","method":"PUT","ret":"txt","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2","x":932,"y":462,"z":"e025d07e.1b656","wires":[["be96d14c.4c002"]]},{"id":"7cf8640d.4172ec","type":"template","name":"投入データ [JSON]","field":"payload","template":"{\"date\":\"20170626T13:39:00Z\",\"sensorname\":\"Sensor3\",\"location\":\"ServerRack3\",\"moisture\":45,\"temperature\":25}","x":552,"y":462,"z":"e025d07e.1b656","wires":[["61b17746.979b28"]]},{"id":"4bdf2c38.a65e64","type":"inject","name":"","topic":"","payload":"true","payloadType":"none","repeat":"","crontab":"","once":false,"x":172,"y":462,"z":"e025d07e.1b656","wires":[["bc456ecc.df1bb"]]},{"id":"bc456ecc.df1bb","type":"template","name":"認証情報付与","field":"headers.Authorization","template":"Bearer testcode2","x":342,"y":462,"z":"e025d07e.1b656","wires":[["7cf8640d.4172ec"]]},{"id":"be96d14c.4c002","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1132,"y":462,"z":"e025d07e.1b656","wires":[]},{"id":"61b17746.979b28","type":"json","name":"","x":732,"y":462,"z":"e025d07e.1b656","wires":[["68cc6086.daec","aa33652.6919f98"]]},{"id":"68cc6086.daec","type":"debug","name":"","active":false,"console":"false","complete":"false","x":892,"y":522,"z":"e025d07e.1b656","wires":[]},{"id":"24346531.1d9a1a","type":"function","name":"ダミーデータ生成（センサー3）","func":"var getTimestamp = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2) + 'T';\nts += (\"0\"+date.getHours()).slice(-2) + ':';\nts += (\"0\"+date.getMinutes()).slice(-2) + ':';\nts += (\"0\"+date.getSeconds()).slice(-2) + 'Z';\n\nreturn ts;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor3\";\n\n// Object of place\nvar location1 = \"ServerRack3\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n    \"location\": location1,\n    \"date\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 30 + 25)*100)/100 ,\n    \"moisture\": Math.floor(( Math.random() * 71 + 30)*100)/100\n};\nreturn msg;\n","outputs":1,"x":402,"y":582,"z":"e025d07e.1b656","wires":[["7255820b.692c9c"]]},{"id":"89be9f58.f646f","type":"inject","name":"","topic":"","payload":"true","payloadType":"none","repeat":"","crontab":"","once":false,"x":172,"y":582,"z":"e025d07e.1b656","wires":[["24346531.1d9a1a"]]},{"id":"7255820b.692c9c","type":"template","name":"認証情報付与","field":"headers.Authorization","template":"Bearer testcode2","x":662,"y":582,"z":"e025d07e.1b656","wires":[["c177aac9.0830e8","e154160c.1272b8"]]},{"id":"e154160c.1272b8","type":"http request","name":"データ追加 [REST API]","method":"PUT","ret":"txt","url":"http://api.trial2.iot.jp.fujitsu.com/v1/ITP314-001/DTC/TEST2","x":912,"y":582,"z":"e025d07e.1b656","wires":[["a327d1d5.9bc98"]]},{"id":"a327d1d5.9bc98","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1132,"y":582,"z":"e025d07e.1b656","wires":[]},{"id":"c177aac9.0830e8","type":"debug","name":"","active":false,"console":"false","complete":"false","x":872,"y":642,"z":"e025d07e.1b656","wires":[]},{"id":"f765144a.ca9e08","type":"comment","name":"REST API GET","info":"","x":182,"y":238,"z":"e025d07e.1b656","wires":[]},{"id":"6f14bb79.4e3704","type":"comment","name":"REST API PUT","info":"","x":182,"y":422,"z":"e025d07e.1b656","wires":[]},{"id":"9e9581c9.53659","type":"comment","name":"REST API Random Data PUT","info":"","x":222,"y":542,"z":"e025d07e.1b656","wires":[]},{"id":"a8f6d103.6edf4","type":"http in","name":"","url":"/api_get","method":"get","x":187,"y":331,"z":"e025d07e.1b656","wires":[["8f47c03b.e9deb"]]},{"id":"d07e0e7c.ad7ed","type":"http response","name":"","x":995,"y":325,"z":"e025d07e.1b656","wires":[]},{"id":"e4e92b8d.8853b8","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor1 Temperature 1 hour","group":"sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1189.250015258789,"y":945.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"a6e56353.11484","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor1 Realtime Temp Gauge","group":"sensor1 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1200.500015258789,"y":1056.0000143051147,"z":"7bf5fc41.093b64","wires":[]},{"id":"56916526.d47e8c","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor1 Temperature 12 hours","group":"sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1196.250015258789,"y":981.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"252c4e5.8e585b2","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor1 Temperature 1week","group":"sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1191.250015258789,"y":1017.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"2f684cfc.516fb4","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor2 Temperature 1 hour","group":"sensor2 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1192.250015258789,"y":1095.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"5401cffc.f6f0c","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor2 Realtime Temp Gauge","group":"sensor2 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1205.000015258789,"y":1210.7500171661377,"z":"7bf5fc41.093b64","wires":[]},{"id":"95525522.023438","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor2 Temperature 12 hours","group":"sensor2 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1200.250015258789,"y":1133.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"52232860.4dcf28","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor2 Temperature 1week","group":"sensor2 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1194.250015258789,"y":1171.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"a31ad3f6.a4626","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor3 Temperature 1 hour","group":"sensor3 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1194.250015258789,"y":1250.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"9a9a75ed.aed248","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor3 Realtime Temp Gauge","group":"sensor3 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1205.750015258789,"y":1365.5000200271606,"z":"7bf5fc41.093b64","wires":[]},{"id":"fd85c7fb.22cb28","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor3 Temperature 12 hours","group":"sensor3 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1203.250015258789,"y":1288.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"673e7a08.9f65b4","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor3 Temperature 1week","group":"sensor3 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1196.250015258789,"y":1327.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"18cd92ae.ad93cd","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor4 Temperature 1 hour","group":"sensor4 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1198.250015258789,"y":1404.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"706a6f7a.13b48","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor4 Realtime Temp Gauge","group":"sensor4 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1211.750015258789,"y":1518.7500219345093,"z":"7bf5fc41.093b64","wires":[]},{"id":"842839b1.e24eb8","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor4 Temperature 12 hours","group":"sensor4 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1207.250015258789,"y":1442.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"61a7c55e.72bd5c","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor4 Temperature 1week","group":"sensor4 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1201.250015258789,"y":1480.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"34e6cddd.18b7d2","type":"http in","name":"GET /dash","url":"/dash","method":"get","x":112.89289093017578,"y":1919.678635597229,"z":"7bf5fc41.093b64","wires":[["b0fecc3b.b0ffb"]]},{"id":"b0fecc3b.b0ffb","type":"template","name":"Redirect URL","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1><span style = 'color:red; font-size:100%; font-weight:bold; font-family: serif;'>■ K5 IoT Platform Visualization Sample ■</span></h1>\n<br>\n\n<p>■ 設置センサー 一覧 ■</p>\n\n<br>\n<div id=\"example-table\" style=\"width: 60%;\"></div>\n<br>\n\n<!--\n<br>\n<div id=\"table_div\" style=\"width: 100%; \"></div>\n<br>\n-->\n\n<!--\n<style type='text/css'>\n  .bold-green-font {\n    font-weight: bold;\n    color: green;\n  }\n\n  .bold-font {\n    font-weight: bold;\n  }\n\n  .right-text {\n    text-align: right;\n  }\n\n  .large-font {\n    font-size: 20px;\n  }\n\n  .italic-darkblue-font {\n    font-style: italic;\n    color: darkblue;\n  }\n\n  .italic-purple-font {\n    font-style: italic;\n    color: purple;\n  }\n\n  .underline-blue-font {\n    text-decoration: underline;\n    color: blue;\n  }\n\n  .gold-border {\n    border: 3px solid gold;\n  }\n\n  .deeppink-border {\n    border: 3px solid deeppink;\n  }\n\n  .orange-background {\n    background-color: orange;\n  }\n\n  .orchid-background {\n    background-color: orchid;\n  }\n\n  .beige-background {\n    background-color: beige;\n  }\n\n</style>\n-->\n\n<script>\n\n$(\"#example-table\").tabulator({\n\tcolumns:[\n\t\t{title:\"SensorName\", field:\"sensorname\", sortable:true, width:100},\n\t\t{title:\"Room\", field:\"room\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Location\", field:\"location\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Registration Date\", field:\"date\", sortable:true, width:150},\n\t\t{title:\"Comment\", field:\"comment\", sortable:false, width:500},\n\t],\n});\n\n$(\"#example-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/api1/v1/sensor_data/all\");\n\n$(window).resize(function(){\n\t$(\"#example-table\").tabulator(\"redraw\");\n});\n\n\n//google.load('visualization', '1', {packages:['table']});\n//google.setOnLoadCallback(drawTable);\n\n//function drawTable() {\n\n//\tvar cssClassNames = {\n//\t\t'headerRow': 'italic-darkblue-font large-font bold-font',\n//\t\t'tableRow': '',\n//\t\t'oddTableRow': 'beige-background',\n//\t\t'selectedTableRow': 'orange-background large-font',\n//\t\t'hoverTableRow': '',\n//\t\t'headerCell': 'gold-border',\n//\t\t'tableCell': '',\n//\t\t'rowNumberCell': 'underline-blue-font'\n//\t\t};\n\n//var options = {'showRowNumber': true, 'allowHtml': true, 'cssClassNames': cssClassNames};\n\n//var data = new google.visualization.DataTable();\n//\tdata.addColumn('string', 'Location');\n//\tdata.addColumn('string', 'Rack Name');\n//\tdata.addColumn('string', 'Sensor Name');\n//\tdata.addColumn('boolean', 'Status');\n//\tdata.addColumn('string', 'Temperature');\n//\tdata.addColumn('string', 'Humidity');\n//\tdata.addColumn('string', 'Battery Change Date');\n//\tdata.addRows([\n//\t\t['29F Server Room A','Server Rack No1','Sensor1',true,'26.12','54.31','2017/06/26' ],\n//\t\t['29F Server Room A','Server Rack No3','Sensor2',true,'27.23','56.44','2017/05/20' ],\n//\t\t['29F Server Room B','Server Rack No2','Sensor3',false,'25.22','53.22','2017/04/14' ],\n//\t\t['29F Server Room C','Server Rack No1','Sensor4',true,'26.89','54.19','2017/06/20' ],\n//\t\t['29F Server Room D','Server Rack No4','Sensor5',true,'25.11','58.36','2017/05/10' ],\n//\t\t['29F Server Room E','Server Rack No8','Sensor6',false,'23.34','51.22','2017/04/12' ],\n//\t\t['29F Server Room E','Server Rack No4','Sensor6',true,'24.21','50.12','2017/04/12' ],\n//\t\t['29F Server Room E','Server Rack No5','Sensor6',true,'23.86','48.31','2017/04/12' ]\n//\t\t]);\n\n//var table = new google.visualization.Table(document.getElementById('table_div'));\n//\ttable.draw(data, {showRowNumber: true});\n//}\n\nfunction goTop1(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/1\");\n}\nfunction goTop2(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/5\");\n}\nfunction goTop3(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/0\");\n}\nfunction goTop4(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/2\");\n}\nfunction goTop5(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/3\");\n}\nfunction goTop6(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/4\");\n}\nfunction goTop7(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/6\");\n}\nfunction goTop8(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/ui/#/7\");\n}\nfunction goTop9(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/sensor\");\n}\nfunction goTop10(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/csv_get\");\n}\nfunction goTop11(){\n  location.href=(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/sensor_info\");\n}\n\n</script>\n\n<form>\n<p> ■周辺温度ダッシュボード■</p>\n\n<br>\n<input type=\"button\" value=\"温度ステータス\" onclick=\"goTop1()\">\n</br>\n<br>\n\n<p> ■湿度ダッシュボード■ </p>\n<br>\n<input type=\"button\" value=\"湿度ステータス\" onclick=\"goTop2()\">\n</br>\n<br>\n<p> ■周辺温度グラフチャート■</p>\n<br>\n<input type=\"button\" value=\"1時間温度推移グラフ\" onclick=\"goTop3()\">\n</br>\n<br>\n<input type=\"button\" value=\"12時間温度推移グラフ\" onclick=\"goTop4()\">\n</br>\n<br>\n<input type=\"button\" value=\"1週間温度推移グラフ\" onclick=\"goTop5()\">\n</br>\n<br>\n<p> ■湿度グラフチャート■</p>\n<br>\n<input type=\"button\" value=\"1時間湿度推移グラフ\" onclick=\"goTop6()\">\n</br>\n<br>\n<input type=\"button\" value=\"12時間湿度推移グラフ\" onclick=\"goTop7()\">\n</br>\n<br>\n<input type=\"button\" value=\"1週間湿度推移グラフ\" onclick=\"goTop8()\">\n</br>\n<br>\n<p> ■温湿度ゲージ■</p>\n<br>\n<input type=\"button\" value=\"温湿度ゲージメーター表示\" onclick=\"goTop9()\">\n</br>\n<br>\n<p> ■CSVファイルダウンロード■</p>\n<br>\n<input type=\"button\" value=\"CSVダウンロード\" onclick=\"goTop10()\">\n</br>\n<br>\n<p> ■センサー管理メニュー■</p>\n<br>\n<input type=\"button\" value=\"センサー管理\" onclick=\"goTop11()\">\n</br>\n</form>\n\n\n\n\n</body>\n</html>\n","x":306.8928985595703,"y":1920.928635597229,"z":"7bf5fc41.093b64","wires":[["5157ec50.7126e4"]]},{"id":"5157ec50.7126e4","type":"http response","name":"","x":517.1428985595703,"y":1922.1786346435547,"z":"7bf5fc41.093b64","wires":[]},{"id":"3f3a7574.8cc4ca","type":"function","name":"Sensor1 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":750.964241027832,"y":1111.142834663391,"z":"7bf5fc41.093b64","wires":[["c0ac6696.0f8d98","ebbeb711.7a14e8","2aefd4e0.aeffcc","ed9cd05.9e3483"]]},{"id":"238bb08f.0d4e4","type":"function","name":"Sensor2 Humid Payload","func":"return {payload:msg.payload.humidity};\n","outputs":1,"x":749.4364891052246,"y":1150.8929376602173,"z":"7bf5fc41.093b64","wires":[["99c81ff.06c5be","2f83b21e.f5156e","334fd52.576452a","63f95e0.a9968a4"]]},{"id":"2aebef70.6cf3","type":"function","name":"Sensor3 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":751.1309280395508,"y":1191.309582710266,"z":"7bf5fc41.093b64","wires":[["2e17e276.36282e","6d44df15.5de66","5635588c.2b4eb8","6aa0ac77.8ce5b4"]]},{"id":"35bc3659.df338a","type":"function","name":"Sensor4 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":750.825325012207,"y":1232.7818117141724,"z":"7bf5fc41.093b64","wires":[["c722b297.171e5","84d5b716.806a38","920faf9e.0a251","6effe33e.c8c09c"]]},{"id":"c0ac6696.0f8d98","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor1 Humidity 1 hour","group":"sensor1 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1192.250015258789,"y":1561.7500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"ed9cd05.9e3483","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor1 Realtime Humidity Gauge","group":"sensor1 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1226.750015258789,"y":1674.750023841858,"z":"7bf5fc41.093b64","wires":[]},{"id":"ebbeb711.7a14e8","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor1 Humidity 12 hours","group":"sensor1 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1201.2500190734863,"y":1601.7500162124634,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"2aefd4e0.aeffcc","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor1 Humidity 1week","group":"sensor1 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1196.2500190734863,"y":1637.7500162124634,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"2f83b21e.f5156e","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor2 Humidity 1 hour","group":"sensor2 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1197.2500190734863,"y":1714.5000171661377,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"99c81ff.06c5be","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor2 Realtime Humidity Gauge","group":"sensor2 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1232.500015258789,"y":1829.5000257492065,"z":"7bf5fc41.093b64","wires":[]},{"id":"334fd52.576452a","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor2 Humidity 12 hours","group":"sensor2 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1209.0000228881836,"y":1753.750018119812,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"63f95e0.a9968a4","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor2 Humidity 1week","group":"sensor2 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1203.0000228881836,"y":1791.750018119812,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"6d44df15.5de66","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor3 Humidity 1 hour","group":"sensor3 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1200.5000228881836,"y":1870.7500190734863,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"2e17e276.36282e","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor3 Realtime Humidity Gauge","group":"sensor3 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1235.750015258789,"y":1984.2500286102295,"z":"7bf5fc41.093b64","wires":[]},{"id":"5635588c.2b4eb8","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor3 Humidity 12 hours","group":"sensor3 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1209.5000228881836,"y":1908.7500200271606,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"6aa0ac77.8ce5b4","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor3 Humidity 1week","group":"sensor3 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1202.5000228881836,"y":1947.7500200271606,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"84d5b716.806a38","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor4 Humidity 1 hour","group":"sensor4 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1204.5000228881836,"y":2024.7500219345093,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"c722b297.171e5","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor4 Realtime Humidity Gauge","group":"sensor4 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1234.250015258789,"y":2138.7500314712524,"z":"7bf5fc41.093b64","wires":[]},{"id":"920faf9e.0a251","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor4 Humidity 12 hours","group":"sensor4 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1212.250015258789,"y":2062.7500219345093,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"6effe33e.c8c09c","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor4 Humidity 1week","group":"sensor4 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1203.7500228881836,"y":2100.750023841858,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"9d6e4e80.f50cf","type":"http in","name":"","url":"/csv_get","method":"get","x":122.39289093017578,"y":2002.428614616394,"z":"7bf5fc41.093b64","wires":[["af837b12.f89a08"]]},{"id":"af837b12.f89a08","type":"file in","name":"","filename":"test_20170707.csv","format":"","x":327.3928985595703,"y":2002.428635597229,"z":"7bf5fc41.093b64","wires":[["fce437b4.6380f8"]]},{"id":"fce437b4.6380f8","type":"http response","name":"","x":522.3928909301758,"y":2003.678614616394,"z":"7bf5fc41.093b64","wires":[]},{"id":"87b00b95.293aa8","type":"http in","name":"","url":"/download","method":"get","x":103.64289093017578,"y":1962.428614616394,"z":"7bf5fc41.093b64","wires":[["be550f6f.fd3da"]]},{"id":"be550f6f.fd3da","type":"template","name":"CSV Download","field":"payload","template":"<!doctype html>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Download Sample</title>\n    </head>\n    <body>\n        <script type='text/javascript'>\n            function handleDownload() {\n                var content = 'あいうえお';\n                var blob = new Blob([ content ], { \"type\" : \"text/plain\" });\n\n                if (window.navigator.msSaveBlob) { \n                    window.navigator.msSaveBlob(blob, \"test.txt\"); \n\n                    // msSaveOrOpenBlobの場合はファイルを保存せずに開ける\n                    window.navigator.msSaveOrOpenBlob(blob, \"test.txt\"); \n                } else {\n                    document.getElementById(\"download\").href = window.URL.createObjectURL(blob);\n                }\n            }\n        </script>\n        <a id=\"download\" href=\"#\" download=\"test.txt\" onclick=\"handleDownload()\">ダウンロード</a>\n    </body>\n</html>","x":313.6428985595703,"y":1963.678635597229,"z":"7bf5fc41.093b64","wires":[["42e10dea.212534"]]},{"id":"42e10dea.212534","type":"http response","name":"","x":529.8928909301758,"y":1969.928614616394,"z":"7bf5fc41.093b64","wires":[]},{"id":"2037e8b9.238958","type":"function","name":"Create Table iotdata","func":"msg.payload = \"create table iotdata (sensorname varchar(20), date date, time time, temperature real, humidity real);\";\n\nreturn msg;","outputs":1,"x":371.25,"y":690,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"88e19aa2.1f5718","type":"function","name":"Create dummy rundom data for Sensor5","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor5\";\n\n// Object of place\nvar location1 = \"ServerRack5\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":382,"y":210,"z":"7bf5fc41.093b64","wires":[["1b945a82.e90215","cd343c30.3f824"]]},{"id":"34711e71.970b82","type":"function","name":"Create dummy rundom data for Sensor6","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor6\";\n\n// Object of place\nvar location1 = \"ServerRack6\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":382,"y":246,"z":"7bf5fc41.093b64","wires":[["1b945a82.e90215","cd343c30.3f824"]]},{"id":"9a5499e3.0c7e78","type":"function","name":"Create dummy rundom data for Sensor7","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor7\";\n\n// Object of place\nvar location1 = \"ServerRack7\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":383,"y":285,"z":"7bf5fc41.093b64","wires":[["1b945a82.e90215","cd343c30.3f824"]]},{"id":"57f609fb.b4fdb8","type":"function","name":"Create dummy rundom data for Sensor8","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor8\";\n\n// Object of place\nvar location1 = \"ServerRack8\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":383,"y":322,"z":"7bf5fc41.093b64","wires":[["1b945a82.e90215","cd343c30.3f824"]]},{"id":"34e398f8.fb1fb8","type":"websocket out","name":"/ws/sensor5","server":"54192100.1d709","client":"","x":301.23807525634766,"y":1523.5714588165283,"z":"7bf5fc41.093b64","wires":[]},{"id":"33e56d3b.c54982","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":133.68253326416016,"y":1522.5713520050049,"z":"7bf5fc41.093b64","wires":[["34e398f8.fb1fb8"]]},{"id":"a6e08dde.91a7c","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":133.57141876220703,"y":1563.0158462524414,"z":"7bf5fc41.093b64","wires":[["9ac4986e.2e8ed8"]]},{"id":"6709683c.9b01e8","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":135.57141876220703,"y":1605.0158462524414,"z":"7bf5fc41.093b64","wires":[["492b7c65.1e0984"]]},{"id":"325ba93c.861ba6","type":"function","name":"Data Modify","func":"msg.payload =  {\n    \"temp\": msg.payload.temperature,\n    \"humidity\": msg.payload.humidity\n};\n\nreturn msg;","outputs":1,"x":136.4603042602539,"y":1644.7936267852783,"z":"7bf5fc41.093b64","wires":[["8016eeb3.841a1"]]},{"id":"9ac4986e.2e8ed8","type":"websocket out","name":"/ws/sensor6","server":"5945612.f2a34a","client":"","x":301.34920501708984,"y":1563.9047527313232,"z":"7bf5fc41.093b64","wires":[]},{"id":"492b7c65.1e0984","type":"websocket out","name":"/ws/sensor7","server":"13fa2ec7.0e6081","client":"","x":303.0991439819336,"y":1604.6547718048096,"z":"7bf5fc41.093b64","wires":[]},{"id":"8016eeb3.841a1","type":"websocket out","name":"/ws/sensor8","server":"7bf18ae5.ceac64","client":"","x":304.0992202758789,"y":1644.9047107696533,"z":"7bf5fc41.093b64","wires":[]},{"id":"3a2871f6.03f08e","type":"function","name":"Sensor5 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":749.464241027832,"y":1274.642840385437,"z":"7bf5fc41.093b64","wires":[["5158e9ea.07d558","33012c12.ca38f4","c87f9fc0.de0c9","8d2e11a1.17fe9"]]},{"id":"5df30fc7.bac19","type":"function","name":"Sensor6 Temp Payload","func":"return {payload:msg.payload.temperature};\n","outputs":1,"x":747.9364891052246,"y":1314.3929433822632,"z":"7bf5fc41.093b64","wires":[["bc3c9049.3ca52","acddabec.767328","93d6d338.c4831","9f114391.af5c1"]]},{"id":"ba7206d4.4855b8","type":"function","name":"Sensor7 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":748.3809432983398,"y":1353.5596055984497,"z":"7bf5fc41.093b64","wires":[["b64bfbdf.36c158","286735ca.5d255a","8b38094a.a291e8","bdcfd2c0.a0de8"]]},{"id":"14327b69.e2faa5","type":"function","name":"Sensor8 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":749.325325012207,"y":1396.2818174362183,"z":"7bf5fc41.093b64","wires":[["43576c5a.addf24","6689b634.25bea8","b8ed164d.d78088","bf2caa01.bdf228"]]},{"id":"37364e34.be9982","type":"function","name":"Sensor5 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":750.7697830200195,"y":1438.4762144088745,"z":"7bf5fc41.093b64","wires":[["7abc38c8.1e7a08","e8e6de33.e2d93","b4b6cb89.f62e88","7145209f.49799"]]},{"id":"cc8cadcc.cc065","type":"function","name":"Sensor6 Humid Payload","func":"return {payload:msg.payload.humidity};\n","outputs":1,"x":749.2420310974121,"y":1478.2263174057007,"z":"7bf5fc41.093b64","wires":[["c32239f4.63d858","de3fb458.3910b8","b3b73f6f.dd82","4c9d416d.a24b2"]]},{"id":"48b4e365.68c4ac","type":"function","name":"Sensor7 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":750.9364700317383,"y":1518.6429624557495,"z":"7bf5fc41.093b64","wires":[["c73d8c8f.c8f69","6303ad27.2b8634","60c44377.794f4c","295ec0af.7b87e"]]},{"id":"93161aae.0db1d8","type":"function","name":"Sensor8 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":750.6308670043945,"y":1560.1151914596558,"z":"7bf5fc41.093b64","wires":[["60712d3c.246e04","df0302bc.a404f","c137197f.85b608","93cd959e.573b88"]]},{"id":"5158e9ea.07d558","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor5 Temperature 1 hour","group":"sensor5 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1501.2500228881836,"y":946.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"8d2e11a1.17fe9","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor5 Realtime Temp Gauge","group":"sensor5 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1512.5000228881836,"y":1056.5000143051147,"z":"7bf5fc41.093b64","wires":[]},{"id":"33012c12.ca38f4","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor5 Temperature 12 hours","group":"sensor5 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1508.2500228881836,"y":982.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"c87f9fc0.de0c9","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor5 Temperature 1week","group":"sensor5 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1503.2500228881836,"y":1018.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"bc3c9049.3ca52","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor6 Temperature 1 hour","group":"sensor6 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1504.2500228881836,"y":1096.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"9f114391.af5c1","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor6 Realtime Temp Gauge","group":"sensor6 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1517.0000228881836,"y":1211.2500171661377,"z":"7bf5fc41.093b64","wires":[]},{"id":"acddabec.767328","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor6 Temperature 12 hours","group":"sensor6 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1512.2500228881836,"y":1134.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"93d6d338.c4831","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor6 Temperature 1week","group":"sensor6 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1506.2500228881836,"y":1172.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"b64bfbdf.36c158","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor7 Temperature 1 hour","group":"sensor7 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1506.2500228881836,"y":1251.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"bdcfd2c0.a0de8","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor7 Realtime Temp Gauge","group":"sensor7 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1517.7500228881836,"y":1366.0000200271606,"z":"7bf5fc41.093b64","wires":[]},{"id":"286735ca.5d255a","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor7 Temperature 12 hours","group":"sensor7 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1515.2500228881836,"y":1289.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"8b38094a.a291e8","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor7 Temperature 1week","group":"sensor7 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1508.2500228881836,"y":1328.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"43576c5a.addf24","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor8 Temperature 1 hour","group":"sensor8 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1510.2500228881836,"y":1405.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"bf2caa01.bdf228","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor8 Realtime Temp Gauge","group":"sensor8 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1523.7500228881836,"y":1519.2500219345093,"z":"7bf5fc41.093b64","wires":[]},{"id":"6689b634.25bea8","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor8 Temperature 12 hours","group":"sensor8 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1519.2500228881836,"y":1443.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"b8ed164d.d78088","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor8 Temperature 1week","group":"sensor8 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1513.2500228881836,"y":1481.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"7abc38c8.1e7a08","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor5 Humidity 1 hour","group":"sensor5 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1504.2500228881836,"y":1562.2500104904175,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"7145209f.49799","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor5 Realtime Humidity Gauge","group":"sensor5 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1538.7500228881836,"y":1675.250023841858,"z":"7bf5fc41.093b64","wires":[]},{"id":"e8e6de33.e2d93","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor5 Humidity 12 hours","group":"sensor5 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1513.2500267028809,"y":1602.2500162124634,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"b4b6cb89.f62e88","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor5 Humidity 1week","group":"sensor5 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1508.2500267028809,"y":1638.2500162124634,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"c32239f4.63d858","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor6 Humidity 1 hour","group":"sensor6 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1509.2500267028809,"y":1715.0000171661377,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"de3fb458.3910b8","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor6 Humidity 12 hours","group":"sensor6 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1521.0000305175781,"y":1754.250018119812,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"b3b73f6f.dd82","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor6 Humidity 1week","group":"sensor6 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1515.0000305175781,"y":1792.250018119812,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"4c9d416d.a24b2","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor6 Realtime Humidity Gauge","group":"sensor6 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1544.5000228881836,"y":1830.0000257492065,"z":"7bf5fc41.093b64","wires":[]},{"id":"c73d8c8f.c8f69","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor7 Humidity 1 hour","group":"sensor7 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1512.5000305175781,"y":1871.2500190734863,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"6303ad27.2b8634","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor7 Humidity 12 hours","group":"sensor7 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1521.5000305175781,"y":1909.2500200271606,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"60c44377.794f4c","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor7 Humidity 1week","group":"sensor7 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1514.5000305175781,"y":1948.2500200271606,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"295ec0af.7b87e","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor7 Realtime Humidity Gauge","group":"sensor7 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1547.7500228881836,"y":1984.7500286102295,"z":"7bf5fc41.093b64","wires":[]},{"id":"60712d3c.246e04","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor8 Humidity 1 hour","group":"sensor8 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1516.5000305175781,"y":2025.2500219345093,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"df0302bc.a404f","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor8 Humidity 12 hours","group":"sensor8 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1524.2500228881836,"y":2063.2500219345093,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"c137197f.85b608","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor8 Humidity 1week","group":"sensor8 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1515.7500305175781,"y":2101.250023841858,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"93cd959e.573b88","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor8 Realtime Humidity Gauge","group":"sensor8 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1546.2500228881836,"y":2139.2500314712524,"z":"7bf5fc41.093b64","wires":[]},{"id":"195162.f39b9e9e","type":"function","name":"Select * from iotdata","func":"msg.payload = \"select * from iotdata;\";\n\nreturn msg;","outputs":1,"x":365.25,"y":982.5,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"32e2d66a.08889a","type":"comment","name":"Create Table","info":"","x":122,"y":691,"z":"e025d07e.1b656","wires":[]},{"id":"f5a93782.3d6098","type":"function","name":"Insert into iotdata","func":"msg.payload = \"insert into iotdata(sensorname, date, time, temperature, humidity) values('Sensor4','2017-07-12','09:19:00',21.46,57.18);\";\n\nreturn msg;","outputs":1,"x":365.75,"y":1310,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"22142f47.e7c69","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":143.74999618530273,"y":1310.4999980926514,"z":"e025d07e.1b656","wires":[["f5a93782.3d6098"]]},{"id":"d1318835.0d9908","type":"function","name":"Delete From Table","func":"msg.payload = \"delete from sensor_data where sensorname='';\";\n\nreturn msg;","outputs":1,"x":369,"y":1349,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"522522c3.02d22c","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":144,"y":1349.5,"z":"e025d07e.1b656","wires":[["d1318835.0d9908"]]},{"id":"db1b8050.72e4e","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":1047.892837524414,"y":731.3928909301758,"z":"7bf5fc41.093b64","wires":[["5bbbf163.0881"]]},{"id":"5bbbf163.0881","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1209.3928451538086,"y":731.1428928375244,"z":"7bf5fc41.093b64","wires":[]},{"id":"db0b9cac.32959","type":"function","name":"Select * from pg_class","func":"msg.payload = \"select * from pg_class;\";\n\nreturn msg;","outputs":1,"x":381.91668701171875,"y":790.7777099609375,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"ef6a051b.ea7598","type":"function","name":"Select * from information_schema","func":"msg.payload = \"select * from information_schema.columns where table_name = 'sensor_data' ORDER BY ordinal_position;\";\n\nreturn msg;","outputs":1,"x":416.58331298828125,"y":827.22216796875,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"fec84e6a.68dd8","type":"comment","name":"Select Tables","info":"","x":120.33331298828125,"y":780.72216796875,"z":"e025d07e.1b656","wires":[]},{"id":"1de32dd3.174f92","type":"function","name":"Add Collum in the Table","func":"msg.payload = \"alter table iotdata add column location varchar(20);\";\n\nreturn msg;","outputs":1,"x":378.02777099609375,"y":1192.7777099609375,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"681ff36e.0cde0c","type":"http in","name":"","url":"/tables_sensors","method":"get","x":146.44444274902344,"y":826.888916015625,"z":"e025d07e.1b656","wires":[["ef6a051b.ea7598"]]},{"id":"65fb6239.92279c","type":"function","name":"Create Table sensors","func":"msg.payload = \"create table sensors (sensorname varchar(20), location varchar(20), date date, comment varchar(100));\";\n\nreturn msg;","outputs":1,"x":375.02777099609375,"y":734.5555419921875,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"b3bfad94.3482f","type":"function","name":"Delete Collum from the Table","func":"msg.payload = \"alter table iotdata drop column location;\";\n\nreturn msg;","outputs":1,"x":393.6944580078125,"y":1152.4443359375,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"14751d69.e12983","type":"comment","name":"Add / Delete Collum Table","info":"","x":165.44444274902344,"y":1119.4443359375,"z":"e025d07e.1b656","wires":[]},{"id":"5fd687ea.861ff8","type":"function","name":"Insert into sensors","func":"msg.payload = \"insert into sensors(sensorname, location, date, comment) values('Sensor8','ストレージラック3','2017-07-14','サーバルームAに設置、TI SensorTAG使用');\";\n\nreturn msg;","outputs":1,"x":368.9166564941406,"y":1269.333251953125,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"4c65ebff.1d81d4","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":142.91665649414062,"y":1268.833251953125,"z":"e025d07e.1b656","wires":[["5fd687ea.861ff8"]]},{"id":"4579af3e.b575b","type":"comment","name":"Add / Delete Data","info":"","x":143.66665649414062,"y":1227.833251953125,"z":"e025d07e.1b656","wires":[]},{"id":"cb039362.12322","type":"function","name":"Select * from sensor_data","func":"msg.payload = \"select * from sensor_data;\";\n\nreturn msg;","outputs":1,"x":383.02777099609375,"y":944.7777099609375,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"1dc4d06.e88a83","type":"debug","name":"","active":true,"console":"false","complete":"false","x":1044.7777709960938,"y":835.5277099609375,"z":"e025d07e.1b656","wires":[]},{"id":"3b5923e8.86de7c","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":828.0277709960938,"y":875.5277099609375,"z":"e025d07e.1b656","wires":[["1dc4d06.e88a83","2d69a804.63bca8"]]},{"id":"64665e5e.00fbc","type":"http in","name":"","url":"/select_sensors","method":"get","x":148.55555725097656,"y":944.6666259765625,"z":"e025d07e.1b656","wires":[["cb039362.12322"]]},{"id":"2d69a804.63bca8","type":"http response","name":"","x":1035.5555419921875,"y":927.3333740234375,"z":"e025d07e.1b656","wires":[]},{"id":"40c03b4d.8b1f84","type":"http in","name":"","url":"/select_iotdata","method":"get","x":145.66665649414062,"y":982.888916015625,"z":"e025d07e.1b656","wires":[["195162.f39b9e9e"]]},{"id":"f201fa3b.8b9508","type":"function","name":"Select * from information_schema","func":"msg.payload = \"select * from information_schema.columns where table_name = 'iotdata' ORDER BY ordinal_position;\";\n\nreturn msg;","outputs":1,"x":417,"y":865,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"8251a2a4.eb00c","type":"http in","name":"","url":"/tables_iotdata","method":"get","x":144,"y":865,"z":"e025d07e.1b656","wires":[["f201fa3b.8b9508"]]},{"id":"a854a9d9.0826c8","type":"comment","name":"Select Data","info":"","x":120,"y":909,"z":"e025d07e.1b656","wires":[]},{"id":"10f8ff95.123ab","type":"http in","name":"","url":"/query","method":"get","x":113.14288330078125,"y":2080.4286098480225,"z":"7bf5fc41.093b64","wires":[["2539110.9e070f"]]},{"id":"484cb83a.c2d748","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":572.1428833007812,"y":2077.4286098480225,"z":"7bf5fc41.093b64","wires":[["2696955a.42d6ea","431c20bd.63eaf"]]},{"id":"2696955a.42d6ea","type":"http response","name":"","x":741.1428833007812,"y":2121.4286098480225,"z":"7bf5fc41.093b64","wires":[]},{"id":"431c20bd.63eaf","type":"debug","name":"","active":false,"console":"false","complete":"false","x":761.1428833007812,"y":2031.4286098480225,"z":"7bf5fc41.093b64","wires":[]},{"id":"45f051a5.a33ed","type":"function","name":"Select count(*) from iotdata","func":"msg.payload = \"select count(*) from iotdata;\";\n\nreturn msg;","outputs":1,"x":387,"y":1058,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"695dc02d.e5dbd","type":"function","name":"Select Count(*) from sensor_data","func":"msg.payload = \"select count(*) from sensor_data;\";\n\nreturn msg;","outputs":1,"x":406.77777099609375,"y":1020.2777099609375,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"eb205393.fd93a","type":"http in","name":"","url":"/select_sensors_c","method":"get","x":149.30555725097656,"y":1020.1666259765625,"z":"e025d07e.1b656","wires":[["695dc02d.e5dbd"]]},{"id":"5ac1c9d3.7b9f78","type":"http in","name":"","url":"/select_iotdata_c","method":"get","x":146.41665649414062,"y":1058.388916015625,"z":"e025d07e.1b656","wires":[["45f051a5.a33ed"]]},{"id":"5d4f95a2.16443c","type":"function","name":"Delete All Data From Table","func":"msg.payload = \"delete from iotdata;\";\n\nreturn msg;","outputs":1,"x":395,"y":1389,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"524ca65c.87af88","type":"inject","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":143,"y":1388.5,"z":"e025d07e.1b656","wires":[["5d4f95a2.16443c"]]},{"id":"68f24513.beb97c","type":"inject","name":"","topic":"","payload":"select version();","payloadType":"string","repeat":"","crontab":"","once":false,"x":167,"y":1437,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"93501904.47ac88","type":"inject","name":"select count(*) from sensors;","topic":"","payload":"select count(*) from sensor_data;","payloadType":"string","repeat":"","crontab":"","once":false,"x":206,"y":1476,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"afe9bcf7.9658a","type":"inject","name":"select * from sensors;","topic":"","payload":"select * from sensor_data;","payloadType":"string","repeat":"","crontab":"","once":false,"x":184,"y":1515,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"6620bc91.414154","type":"inject","name":"create table sensor_data","topic":"","payload":"create table sensor_data (sensorname varchar(30) primary key, location varchar(30), room varchar(30), registerdate varchar(20), comment varchar(100));","payloadType":"string","repeat":"","crontab":"","once":false,"x":192,"y":1553,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"f0691676.b2da88","type":"inject","name":"insert data to sensor_data","topic":"","payload":"insert into sensor_data(sensorname, room, location, registerdate, comment) values('Sensor1','サーバルームA','サーバラック1','2017-07-20','Ti SensorTAG使用、電池新品投入');","payloadType":"string","repeat":"","crontab":"","once":false,"x":196,"y":1592,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"8a9711f9.1a58f","type":"inject","name":"drop table sensor_data;","topic":"","payload":"drop table sensor_data;","payloadType":"string","repeat":"","crontab":"","once":false,"x":189.44445037841797,"y":1629.999942779541,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"6551f56.742340c","type":"template","name":"Make SQL","field":"payload","template":"select * from iotdata where sensorname = '{{sensorname}}';","x":404.14288330078125,"y":2078.4286098480225,"z":"7bf5fc41.093b64","wires":[["484cb83a.c2d748"]]},{"id":"2539110.9e070f","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nreturn msg;","outputs":1,"x":264.14288330078125,"y":2167.4286098480225,"z":"7bf5fc41.093b64","wires":[["6551f56.742340c"]]},{"id":"7145f3.c9d81a0c","type":"inject","name":"create table iotdata","topic":"","payload":"create table iotdata (sensorname varchar(30), date varchar(20), time varchar(20), timestamp timestamp without time zone, temperature numeric, humidity numeric);","payloadType":"string","repeat":"","crontab":"","once":false,"x":181.44445037841797,"y":1713.5555725097656,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"ca291e5b.0b381","type":"inject","name":"drop table iotdata;","topic":"","payload":"drop table iotdata;","payloadType":"string","repeat":"","crontab":"","once":false,"x":176.11111450195312,"y":1674.2221698760986,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"913edd73.2df17","type":"http in","name":"","url":"/api1/v1/sensor_data/all","method":"get","x":169.66665649414062,"y":98.88887786865234,"z":"222012c.693f9ee","wires":[["635c6ecc.95815"]]},{"id":"635c6ecc.95815","type":"function","name":"Select * from sensor_data","func":"msg.payload = \"select * from sensor_data order by sensorname;\";\n\nreturn msg;","outputs":1,"x":437.77783203125,"y":99.99993896484375,"z":"222012c.693f9ee","wires":[["52f66680.07cc58"]]},{"id":"fa1f3e55.33c6e","type":"function","name":"Message Headers","func":"msg.headers = {\n \"Access-Control-Allow-Origin\":\"*\",\n \"Access-Control-Allow-Method\":\"GET,POST,PUT,DELETE,OPTIONS\",\n \"Access-Control-Allow-Headers\":\"Origin, X-Requested-With, Content-Type, Accept\"\n}\nreturn msg;","outputs":1,"x":873.3334121704102,"y":100.00000858306885,"z":"222012c.693f9ee","wires":[["a254e56b.ea4118","15f7157e.1a649b"]]},{"id":"52f66680.07cc58","type":"postgres","postgresdb":"b88098e5.2edd18","name":"postgres","output":true,"outputs":1,"x":697.7778549194336,"y":100.00000858306885,"z":"222012c.693f9ee","wires":[["fa1f3e55.33c6e"]]},{"id":"a254e56b.ea4118","type":"debug","name":"","active":true,"console":"false","complete":"false","x":1054.444580078125,"y":55.555524826049805,"z":"222012c.693f9ee","wires":[]},{"id":"15f7157e.1a649b","type":"http response","name":"","x":1040.7779273986816,"y":136.25007247924805,"z":"222012c.693f9ee","wires":[]},{"id":"47148253.41914c","type":"http in","name":"","url":"/api1/v1/sensor_data/list","method":"get","x":170.11109924316406,"y":201,"z":"222012c.693f9ee","wires":[["71a9f9a.e4e3c08"]]},{"id":"71a9f9a.e4e3c08","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nmsg.location = msg.payload.location;\nmsg.room = msg.payload.room;\nmsg.registerdate = msg.payload.registerdate;\nmsg.comment = msg.payload.comment;\nreturn msg;","outputs":1,"x":494.6666564941406,"y":201.11109924316406,"z":"222012c.693f9ee","wires":[["e97f01c8.f185c"]]},{"id":"e97f01c8.f185c","type":"template","name":"Make SQL","field":"payload","template":"select * from sensor_data where sensorname = '{{sensorname}}' or location = '{{location}}' or room = '{{room}}' or registerdate = '{{registerdate}}';","x":706.111083984375,"y":200.99996948242188,"z":"222012c.693f9ee","wires":[["52f66680.07cc58"]]},{"id":"7da5a539.cfcd7c","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nmsg.location = msg.payload.location;\nmsg.room = msg.payload.room;\nmsg.registerdate = msg.payload.registerdate;\nmsg.comment = msg.payload.comment;\n\nreturn msg;","outputs":1,"x":496.888916015625,"y":289.77777099609375,"z":"222012c.693f9ee","wires":[["a46111d7.dc1f"]]},{"id":"a46111d7.dc1f","type":"template","name":"Make SQL","field":"payload","template":"insert into sensor_data(sensorname, location, room, registerdate, comment) values('{{sensorname}}','{{location}}','{{room}}','{{registerdate}}','{{comment}}');","x":710.3333129882812,"y":289.6666259765625,"z":"222012c.693f9ee","wires":[["52f66680.07cc58"]]},{"id":"69893c86.0c4ba4","type":"http in","name":"","url":"/api1/v1/sensor_data/add","method":"get","x":175.6666717529297,"y":288.6666564941406,"z":"222012c.693f9ee","wires":[["7da5a539.cfcd7c"]]},{"id":"d35e616b.4565d","type":"debug","name":"","active":false,"console":"false","complete":"false","x":1057.642837524414,"y":691.8928909301758,"z":"7bf5fc41.093b64","wires":[]},{"id":"84fd373e.f28218","type":"http in","name":"","url":"/api1/v1/sensor_data/del","method":"get","x":173,"y":378,"z":"222012c.693f9ee","wires":[["e9b4f665.57c7f8"]]},{"id":"e9b4f665.57c7f8","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\n\nreturn msg;","outputs":1,"x":499,"y":378,"z":"222012c.693f9ee","wires":[["3e2e584d.fe1508"]]},{"id":"3e2e584d.fe1508","type":"template","name":"Make SQL","field":"payload","template":"delete from sensor_data where sensorname = '{{sensorname}}';","x":714,"y":378,"z":"222012c.693f9ee","wires":[["52f66680.07cc58"]]},{"id":"dd2d8bf2.884188","type":"http in","name":"","url":"/api1/v1/sensor_data/update","method":"get","x":187,"y":460,"z":"222012c.693f9ee","wires":[["93471c36.eb7dc"]]},{"id":"93471c36.eb7dc","type":"function","name":"Payload sensorname collumn","func":"msg.sensorname = msg.payload.sensorname;\nmsg.location = msg.payload.location;\nmsg.room = msg.payload.room;\nmsg.date = msg.payload.registerdate;\nmsg.comment = msg.payload.comment;\n\nreturn msg;","outputs":1,"x":500,"y":461,"z":"222012c.693f9ee","wires":[["4efb0351.ee5bac"]]},{"id":"4efb0351.ee5bac","type":"template","name":"Make SQL","field":"payload","template":"update sensor_data set comment = '{{comment}}' where sensorname = '{{sensorname}}'; ","x":713.4443969726562,"y":460.88885498046875,"z":"222012c.693f9ee","wires":[["52f66680.07cc58"]]},{"id":"f2ca6960.7ecfd8","type":"comment","name":"Select * From Sensor_data","info":"","x":163,"y":61,"z":"222012c.693f9ee","wires":[]},{"id":"b9c57d93.4c27c","type":"comment","name":"Select * From Sensor_data where XXX","info":"","x":199,"y":165,"z":"222012c.693f9ee","wires":[]},{"id":"3bc528f2.267198","type":"comment","name":"Insert into sensor_data","info":"","x":151,"y":253,"z":"222012c.693f9ee","wires":[]},{"id":"eef32031.91f86","type":"comment","name":"Delete from sensor_data","info":"","x":157,"y":341,"z":"222012c.693f9ee","wires":[]},{"id":"3071f101.00e25e","type":"comment","name":"Update sensor_data","info":"","x":144,"y":424,"z":"222012c.693f9ee","wires":[]},{"id":"83c6dbb9.ea9468","type":"http in","name":"","url":"/sensor_info","method":"get","x":140,"y":108,"z":"54fc7024.6ad96","wires":[["e9827730.330c98"]]},{"id":"e9827730.330c98","type":"template","name":"HTML & Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n<h1>センサー管理メニュー</h1>\n<br><br>\n\n<p>■ 設置センサー 一覧 ■</p>\n\n<br>\n<div id=\"example-table\" style=\"width: 60%;\"></div>\n<br>\n<form>\n<input type=\"button\"  value=\"センサー一覧更新\" onclick=\"koshin()\">\n</form>\n</br>\n\n<!--\n<p>■ センサー 検索 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/list\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"registerdate\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"検索\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー検索画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー検索\" onclick=\"winOpen1()\">\n</form>\n<br>\n\n<!--\n<p>■ センサー 追加 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/add\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"date\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"追加\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー追加画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー追加\" onclick=\"winOpen2()\">\n</form>\n<br>\n\n<!--\n<p>■ センサー 情報更新 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/update\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"更新\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー情報更新画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー情報更新\" onclick=\"winOpen3()\">\n</form>\n<br>\n\n<!--\n<p>■ センサー 削除 ■</p>\n<br>\n<form action=\"/api1/v1/sensor_data/del\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"削除\" /></p>\n</form>\n<br><br>\n-->\n\n<!-- センサー削除画面を開く -->\n<br>\n<form>\n<input type=\"button\" value=\"センサー削除\" onclick=\"winOpen4()\">\n</form>\n<br>\n\n<!-- ブラウザ前画面に戻る、更新ボタン -->\n<form>\n<input type=\"button\"  value=\"戻る\" onclick=\"modoru()\">\n<input type=\"button\"  value=\"更新\" onclick=\"koshin()\">\n</form>\n\n<script>\n\nfunction modoru(){\n  history.back();\n}\n\nfunction koshin(){\n  location.reload();\n}\n\nfunction winOpen1(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/search_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\nfunction winOpen2(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/add_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\nfunction winOpen3(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/update_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\nfunction winOpen4(){\nwindow.open(\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/delete_sensor\",\"sub\",\"width=640,height=480,top=100,left=100\");\n}\n\n//koshin();\ndatetimeweek();\n\n$(\"#example-table\").tabulator({\n\tcolumns:[\n\t\t{title:\"SensorName\", field:\"sensorname\", sortable:true, width:100},\n\t\t{title:\"Room\", field:\"room\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Location\", field:\"location\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Registration Date\", field:\"registerdate\", sortable:true, width:150},\n\t\t{title:\"Comment\", field:\"comment\", sortable:false, width:500},\n\t],\n});\n\n$(\"#example-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/api1/v1/sensor_data/all\");\n\n$(window).resize(function(){\n\t$(\"#example-table\").tabulator(\"redraw\");\n});\n\n</script>\n\n</body>\n</html>","x":360,"y":108,"z":"54fc7024.6ad96","wires":[["e107b708.86c628"]]},{"id":"e107b708.86c628","type":"http response","name":"","x":651,"y":109,"z":"54fc7024.6ad96","wires":[]},{"id":"b8cef070.a6363","type":"comment","name":"センサー情報管理","info":"","x":142,"y":69,"z":"54fc7024.6ad96","wires":[]},{"id":"7d1cefd9.796d3","type":"http in","name":"","url":"/search_sensor","method":"get","x":152,"y":228,"z":"54fc7024.6ad96","wires":[["8d304c79.105d9"]]},{"id":"8d304c79.105d9","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>Sensor Search</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>センサー検索</h1>\n<br><br>\n<form action=\"/api1/v1/sensor_data/list\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"registerdate\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"検索\" /></p>\n</form>\n<br>\n\n<!--\n<br>\n<div id=\"search-table\" style=\"width: 100%;\"></div>\n<br>\n-->\n\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n<script>\n\n$(\"#search-table\").tabulator({\n\tcolumns:[\n\t\t{title:\"SensorName\", field:\"sensorname\", sortable:true, width:100},\n\t\t{title:\"Room\", field:\"room\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Location\", field:\"location\", sortable:true, sorter:\"string\", width:200},\n\t\t{title:\"Registration Date\", field:\"registerdate\", sortable:true, width:150},\n\t\t{title:\"Comment\", field:\"comment\", sortable:false, width:500},\n\t],\n});\n\n$(\"#search-table\").tabulator(\"setData\", \"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/api1/v1/sensor_data/list?\");\n\n$(window).resize(function(){\n\t$(\"#search-table\").tabulator(\"redraw\");\n});\n\n</script>\n\n\n</body>\n</html>","x":362,"y":228,"z":"54fc7024.6ad96","wires":[["e107b708.86c628"]]},{"id":"f43c73e9.59b0c","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>■ センサー追加 ■</h1>\n<br>\n<form action=\"/api1/v1/sensor_data/add\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Location：<input type=\"text\" name=\"location\" value=\"\" size=\"20\" /></p></br>\n<p>Room Name：<input type=\"text\" name=\"room\" value=\"\" size=\"20\" /></p></br>\n<p>Register Date：<input type=\"text\" name=\"registerdate\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"追加\" /></p>\n</form>\n\n<br>\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n</body>\n</html>","x":364,"y":306,"z":"54fc7024.6ad96","wires":[["e107b708.86c628"]]},{"id":"7b43dbe3.fa6fa4","type":"http in","name":"","url":"/add_sensor","method":"get","x":145,"y":305,"z":"54fc7024.6ad96","wires":[["f43c73e9.59b0c"]]},{"id":"6127be36.a2a78","type":"http in","name":"","url":"/update_sensor","method":"get","x":156,"y":380,"z":"54fc7024.6ad96","wires":[["a824dcd8.16553"]]},{"id":"a824dcd8.16553","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>■ センサー 情報更新 ■</h1>\n<br>\n<form action=\"/api1/v1/sensor_data/update\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p>Comment：<input type=\"text\" name=\"comment\" value=\"\" size=\"50\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"更新\" /></p>\n</form>\n\n<br>\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n</body>\n</html>","x":363,"y":375,"z":"54fc7024.6ad96","wires":[["e107b708.86c628"]]},{"id":"b493bafa.a272d8","type":"http in","name":"","url":"/delete_sensor","method":"get","x":153,"y":452,"z":"54fc7024.6ad96","wires":[["1f4d781a.ce4a48"]]},{"id":"1f4d781a.ce4a48","type":"template","name":"HTML + Javascript","field":"payload","template":"<!DOCTYPE html>\n<html lang = \"ja\">\n<head>\n\t<meta charset = \"utf-8\">\n\t<title>JavaScript Form Test</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/css/style2.css\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/css/tabulator.min.css\">\n\t<script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"></script> \n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\" integrity=\"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=\" crossorigin=\"anonymous\"></script>\n\t<script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\" integrity=\"sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=\" crossorigin=\"anonymous\"></script> \n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/fancytree/dist/jquery.fancytree-all.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/dist/js/tabulator.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/kousin.js\"></script>\n\t<script type=\"text/javascript\" src=\"https://h2lnoavy-ncwpzaor.jp-east-1.cf-app.net/script/date-time-week.js\"></script>\n</head>\n<body>\n\n<h1>■ センサー 削除 ■</h1>\n<br>\n<form action=\"/api1/v1/sensor_data/del\" method=\"GET\">\n<p>Sensor Name：<input type=\"text\" name=\"sensorname\" value=\"\" size=\"20\" /></p></br>\n<p><input type=\"submit\" name=\"submit\" value=\"削除\" /></p>\n</form>\n\n<br>\n<p><input type=\"submit\" onClick=\"window.close();\" value=\"閉じる\" /></p>\n\n</body>\n</html>","x":368,"y":449,"z":"54fc7024.6ad96","wires":[["e107b708.86c628"]]},{"id":"7d517761.1871e8","type":"mqtt in","name":"Sensor-SD001","topic":"testcode2/v1/ITP314-001/DTC/SD001","broker":"11917135.5de19f","x":94.642822265625,"y":588.1428833007812,"z":"7bf5fc41.093b64","wires":[["cdd37dd2.1cd3a"]]},{"id":"742945eb.53fcac","type":"mqtt in","name":"Sensor-SD002","topic":"testcode2/v1/ITP314-001/DTC/SD002","broker":"11917135.5de19f","x":93.642822265625,"y":635.1428833007812,"z":"7bf5fc41.093b64","wires":[["cdd37dd2.1cd3a"]]},{"id":"ddf2b870.cefc18","type":"mqtt in","name":"Sensor-SD003","topic":"testcode2/v1/ITP314-001/DTC/SD003","broker":"11917135.5de19f","x":94.642822265625,"y":684.1428833007812,"z":"7bf5fc41.093b64","wires":[["cdd37dd2.1cd3a"]]},{"id":"ad99e47f.4a1768","type":"mqtt in","name":"Sensor-SD004","topic":"testcode2/v1/ITP314-001/DTC/SD004","broker":"11917135.5de19f","x":93.642822265625,"y":730.1428833007812,"z":"7bf5fc41.093b64","wires":[["cdd37dd2.1cd3a"]]},{"id":"7567992a.1a68b8","type":"mqtt out","name":"Sensor-SD001","topic":"testcode2/v1/ITP314-001/DTC/SD001","qos":"1","retain":"","broker":"11917135.5de19f","x":877,"y":65,"z":"7bf5fc41.093b64","wires":[]},{"id":"4de0990c.5e1e58","type":"mqtt out","name":"Sensor-SD002","topic":"testcode2/v1/ITP314-001/DTC/SD002","qos":"1","retain":"","broker":"11917135.5de19f","x":878,"y":112,"z":"7bf5fc41.093b64","wires":[]},{"id":"19c21e82.368bb1","type":"mqtt out","name":"Sensor-SD003","topic":"testcode2/v1/ITP314-001/DTC/SD003","qos":"1","retain":"","broker":"11917135.5de19f","x":880,"y":160,"z":"7bf5fc41.093b64","wires":[]},{"id":"d25d8e17.d58e8","type":"mqtt out","name":"Sensor-SD004","topic":"testcode2/v1/ITP314-001/DTC/SD004","qos":"1","retain":"","broker":"11917135.5de19f","x":881,"y":208,"z":"7bf5fc41.093b64","wires":[]},{"id":"f22eb998.6f0338","type":"inject","name":"select current_timestamp","topic":"","payload":"select current_timestamp","payloadType":"string","repeat":"","crontab":"","once":false,"x":762,"y":1173,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"fdbbdc47.2b1","type":"inject","name":"select now();","topic":"","payload":"select now();","payloadType":"string","repeat":"","crontab":"","once":false,"x":723,"y":1232,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"84bf2f0d.56d72","type":"inject","name":"show timezone;","topic":"","payload":"show timezone;","payloadType":"string","repeat":"","crontab":"","once":false,"x":726,"y":1292,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"66f29a36.dd8174","type":"inject","name":"select sensorname,max(timestamp) from iotdata group by sensorname; ","topic":"","payload":"select sensorname,max(timestamp) from iotdata group by sensorname; ","payloadType":"string","repeat":"","crontab":"","once":false,"x":848,"y":1344,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"4d587c99.e78e54","type":"inject","name":"select max(timestamp) inner join","topic":"","payload":"select iotdataA.sensorname,iotdataA.timestamp,iotdataA.temperature,iotdataA.humidity from iotdata as iotdataA inner join (select sensorname,max(timestamp) as maxtime from iotdata group by sensorname) as iotdataB on iotdataA.sensorname = iotdataB.sensorname and iotdataA.timestamp = iotdataB.maxtime;","payloadType":"string","repeat":"","crontab":"","once":false,"x":729,"y":1380,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"cc78bb2a.adbc58","type":"template","name":"Make SQL","field":"payload","template":"select iotdataA.sensorname,iotdataA.timestamp,iotdataA.date,iotdataA.time,iotdataA.temperature,iotdataA.humidity from iotdata as iotdataA inner join (select sensorname,max(timestamp) as maxtime from iotdata group by sensorname) as iotdataB on iotdataA.sensorname = iotdataB.sensorname and iotdataA.timestamp = iotdataB.maxtime;","x":444,"y":539,"z":"222012c.693f9ee","wires":[["52f66680.07cc58"]]},{"id":"4b65c196.c64ca","type":"http in","name":"","url":"/api/v1/sensor_lasttime","method":"get","x":172,"y":539,"z":"222012c.693f9ee","wires":[["cc78bb2a.adbc58"]]},{"id":"7121dc13.3d10d4","type":"inject","name":"select Join database","topic":"","payload":"select iotdataA.sensorname,iotdataA.timestamp,iotdataA.date,iotdataA.time,iotdataA.temperature,iotdataA.humidity from iotdata as iotdataA inner join (select sensorname,max(timestamp) as maxtime from iotdata group by sensorname) as iotdataB on iotdataA.sensorname = iotdataB.sensorname and iotdataA.timestamp = iotdataB.maxtime;","payloadType":"string","repeat":"","crontab":"","once":false,"x":693,"y":1416,"z":"e025d07e.1b656","wires":[["3b5923e8.86de7c"]]},{"id":"bb035cf1.57af6","type":"comment","name":"Last data from iotdata Table order by Sensorname","info":"","x":241,"y":503,"z":"222012c.693f9ee","wires":[]},{"id":"f057dcc4.01705","type":"function","name":"Create dummy rundom data for Sensor9","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor9\";\n\n// Object of place\nvar location1 = \"ServerRack9\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":384,"y":358,"z":"7bf5fc41.093b64","wires":[["cd343c30.3f824","1b945a82.e90215"]]},{"id":"b05feeac.b5386","type":"function","name":"Create dummy rundom data for Sensor10","func":"var getTimestamp = function () {\n    var date = new Date();\n    date.setHours(date.getHours() + 9);\n    var dt = date.getFullYear() + '-';\n    dt += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\n    dt += (\"0\"+date.getDate()).slice(-2) + 'T';\n    dt += (\"0\"+date.getHours()).slice(-2) + ':';\n    dt += (\"0\"+date.getMinutes()).slice(-2) + ':';\n    dt += (\"0\"+date.getSeconds()).slice(-2) + '+09:00';\n    return dt;\n}\n\nvar getTimestampD = function () {\nvar date = new Date();\ndate.setHours(date.getHours() + 9);\n\nvar ts = date.getFullYear() + '-';\nts += (\"0\"+(date.getMonth()+1)).slice(-2) + '-';\nts += (\"0\"+date.getDate()).slice(-2);\n\nreturn ts;\n};\n\nvar getTimestampT = function () {\nvar hour = new Date();\nhour.setHours(hour.getHours() +9);\n\nvar hr = (\"0\"+hour.getHours()).slice(-2) + ':';\nhr += (\"0\"+hour.getMinutes()).slice(-2) + ':';\nhr += (\"0\"+hour.getSeconds()).slice(-2);\n\nreturn hr;\n};\n\n// Object of SensorName\nvar name1 = \"Sensor10\";\n\n// Object of place\nvar location1 = \"ServerRack10\"\n\n\nmsg.payload={\n    \"sensorname\": name1,\n//    \"location\": location1,\n    \"date\": getTimestampD(),\n    \"time\": getTimestampT(),\n    \"timestamp\": getTimestamp(),\n    \"temperature\": Math.floor((Math.random() * 9 + 20)*100)/100 ,\n    \"humidity\": Math.floor(( Math.random() * 15 + 40)*100)/100\n};\nreturn msg;","outputs":1,"x":388,"y":394,"z":"7bf5fc41.093b64","wires":[["cd343c30.3f824","1b945a82.e90215"]]},{"id":"78c1534a.22d68c","type":"function","name":"Sensor9 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":750.214241027832,"y":1601.142840385437,"z":"7bf5fc41.093b64","wires":[["80942aea.fbbc28","ddaa00e.5d829","407dd093.76f51","68f200ea.8db56"]]},{"id":"ad3e05c9.373928","type":"function","name":"Sensor10 Temp Payload","func":"return {payload:msg.payload.temperature};","outputs":1,"x":756.1586380004883,"y":1640.865008354187,"z":"7bf5fc41.093b64","wires":[["38f031f8.01ac6e","2c2437ab.2f9ef8","e4aff52e.2d9e28","9558a5c5.374e18"]]},{"id":"218335e1.557bfa","type":"function","name":"Sensor9 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":756.7697830200195,"y":1680.2262144088745,"z":"7bf5fc41.093b64","wires":[["bb943956.af6ab8","9297dca9.8ff77","b043c70.cda4738","2fcd7a7e.1e9a16"]]},{"id":"56b8f546.89edbc","type":"function","name":"Sensor10 Humid Payload","func":"return {payload:msg.payload.humidity};","outputs":1,"x":761.4641799926758,"y":1719.6983823776245,"z":"7bf5fc41.093b64","wires":[["20bc31d2.4e7f9e","87d460c6.9e295","a710e57f.c7e3b8","a024a307.47a55"]]},{"id":"bb943956.af6ab8","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor9 Humidity 1 hour","group":"sensor9 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1517.5,"y":2180,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"9297dca9.8ff77","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor9 Humidity 12 hours","group":"sensor9 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1526.5,"y":2218.0000009536743,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"b043c70.cda4738","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor9 Humidity 1week","group":"sensor9 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1519.5,"y":2257.0000009536743,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"2fcd7a7e.1e9a16","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor9 Realtime Humidity Gauge","group":"sensor9 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1552.7499923706055,"y":2293.500009536743,"z":"7bf5fc41.093b64","wires":[]},{"id":"20bc31d2.4e7f9e","type":"ui_chart","tab":"9614aa63.ea9888","name":"Sensor10 Humidity 1 hour","group":"sensor10 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1521.5,"y":2334.000002861023,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"87d460c6.9e295","type":"ui_chart","tab":"a26c4963.778498","name":"Sensor10 Humidity 12 hours","group":"sensor10 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1529.2499923706055,"y":2372.000002861023,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"a710e57f.c7e3b8","type":"ui_chart","tab":"b2251b3a.e88bc8","name":"Sensor10 Humidity 1week","group":"sensor10 Humidity","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1520.75,"y":2410.0000047683716,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"a024a307.47a55","type":"ui_gauge","tab":"aecdcf58.fb5c9","name":"Sensor10 Realtime Humidity Gauge","group":"sensor10 Status","order":1,"format":"{{value}}%","min":"40","max":"55","x":1551.2499923706055,"y":2448.000012397766,"z":"7bf5fc41.093b64","wires":[]},{"id":"80942aea.fbbc28","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor9 Temperature 1 hour","group":"sensor9 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1220,"y":2178.75,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"68f200ea.8db56","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor9 Realtime Temp Gauge","group":"sensor9 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1231.5,"y":2293.500009536743,"z":"7bf5fc41.093b64","wires":[]},{"id":"ddaa00e.5d829","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor9 Temperature 12 hours","group":"sensor9 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1229,"y":2216.75,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"407dd093.76f51","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor9 Temperature 1week","group":"sensor9 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1222,"y":2255.75,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"38f031f8.01ac6e","type":"ui_chart","tab":"85520cfd.6c5a3","name":"Sensor10 Temperature 1 hour","group":"sensor10 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1224,"y":2332.75,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"9558a5c5.374e18","type":"ui_gauge","tab":"a7aa3c6e.2da45","name":"Sensor10 Realtime Temp Gauge","group":"sensor10 Status","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1237.5,"y":2446.750011444092,"z":"7bf5fc41.093b64","wires":[]},{"id":"2c2437ab.2f9ef8","type":"ui_chart","tab":"a09df126.e15a5","name":"Sensor10 Temperature 12 hours","group":"sensor10 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"12","removeOlderUnit":"3600","x":1233,"y":2370.75,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"e4aff52e.2d9e28","type":"ui_chart","tab":"3d5dc16c.f5300e","name":"Sensor10 Temperature 1week","group":"sensor10 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":"1","removeOlderUnit":"604800","x":1227,"y":2408.75,"z":"7bf5fc41.093b64","wires":[[],[]]},{"id":"e90b6766.f09928","type":"comment","name":"Node-RED Dashboard-UI","info":"","x":1175.000015258789,"y":905.0000133514404,"z":"7bf5fc41.093b64","wires":[]},{"id":"4baa71e3.60a3e","type":"ui_gauge","tab":"bf6e252b.63b8c8","name":"Temp Gauge","group":"Sensor1 Temperature","order":1,"format":"{{value}}℃","min":"20","max":"30","x":1117.5,"y":806.25,"z":"7bf5fc41.093b64","wires":[]},{"id":"46bc7362.1dfd1c","type":"ui_chart","tab":"bf6e252b.63b8c8","name":"Temp Line Chart","group":"Sensor1 Temperature","order":1,"interpolate":"linear","nodata":"No Data","removeOlder":1,"removeOlderUnit":"3600","x":1132.5,"y":852.5,"z":"7bf5fc41.093b64","wires":[[],[]]}]